<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-tutorials docs-version-current docs-doc-page docs-doc-id-webhooks/webhook" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Webhook Notifications | Hyperledger Identus</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://hyperledger.github.io/identus-docs/tutorials/webhooks/webhook"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-tutorials-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-tutorials-current"><meta data-rh="true" property="og:title" content="Webhook Notifications | Hyperledger Identus"><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><link data-rh="true" rel="icon" href="/identus-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://hyperledger.github.io/identus-docs/tutorials/webhooks/webhook"><link data-rh="true" rel="alternate" href="https://hyperledger.github.io/identus-docs/tutorials/webhooks/webhook" hreflang="en"><link data-rh="true" rel="alternate" href="https://hyperledger.github.io/identus-docs/tutorials/webhooks/webhook" hreflang="x-default"><link rel="stylesheet" href="/identus-docs/assets/css/styles.7aa07c05.css">
<script src="/identus-docs/assets/js/runtime~main.ed5919e4.js" defer="defer"></script>
<script src="/identus-docs/assets/js/main.713fc82e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/identus-docs/"><div class="navbar__logo"><img src="/identus-docs/img/identus-navbar-light.png" alt=" Identus logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/identus-docs/img/identus-navbar-light.png" alt=" Identus logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/identus-docs/docs/getting-started">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/identus-docs/tutorials/">Tutorials</a><a class="navbar__item navbar__link" href="/identus-docs/adrs/">ADRs</a><a class="navbar__item navbar__link" href="/identus-docs/agent-api/">Agent API</a><div class="navbar__item dropdown dropdown--hoverable"><a aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link" href="/identus-docs/tutorials/webhooks/webhook">SDKs</a><ul class="dropdown__menu"><li><a href="https://hyperledger.github.io/identus-edge-agent-sdk-swift/documentation/edgeagentsdk/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Edge Agent SDK Swift<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a class="dropdown__link" href="/identus-docs/identus-edge-agent-sdk-ts/sdk">Edge Agent SDK Typescript</a></li><li><a href="https://hyperledger.github.io/identus-edge-agent-sdk-kmp/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Edge Agent SDK Kotlin Multiplatform<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://github.com/input-output-hk/prism-did-method-spec/blob/main/w3c-spec/PRISM-method.md" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">PRISM DID Spec<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/identus-docs/tutorials/">Tutorials</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/identus-docs/tutorials/connections/connection">Connections</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/identus-docs/tutorials/category/credentials">Credentials</a><button aria-label="Expand sidebar category &#x27;Credentials&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/identus-docs/tutorials/category/dids">DIDs</a><button aria-label="Expand sidebar category &#x27;DIDs&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/identus-docs/tutorials/category/schemas">Schemas</a><button aria-label="Expand sidebar category &#x27;Schemas&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/identus-docs/tutorials/category/credential-definition">Credential Definition</a><button aria-label="Expand sidebar category &#x27;Credential Definition&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/identus-docs/tutorials/category/secret-management">Secret Management</a><button aria-label="Expand sidebar category &#x27;Secret Management&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/identus-docs/tutorials/webhooks/webhook">Webhooks</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/identus-docs/tutorials/webhooks/webhook">Webhook Notifications</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/identus-docs/tutorials/multitenancy/tenant-onboarding">Multi-Tenancy</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/identus-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Webhooks</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Webhook Notifications</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Webhook Notifications</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction" href="/identus-docs/tutorials/webhooks/webhook#introduction">​</a></h2>
<p>Welcome to the tutorial on webhook notifications in the Cloud Agent. In this tutorial, we will explore how webhook
notifications can enhance your experience with the Cloud Agent by providing real-time updates on events. By leveraging
webhook notifications, you can stay informed about important changes happening within the agent.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="understanding-webhook-notifications">Understanding Webhook Notifications<a class="hash-link" aria-label="Direct link to Understanding Webhook Notifications" title="Direct link to Understanding Webhook Notifications" href="/identus-docs/tutorials/webhooks/webhook#understanding-webhook-notifications">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-webhooks">What are Webhooks?<a class="hash-link" aria-label="Direct link to What are Webhooks?" title="Direct link to What are Webhooks?" href="/identus-docs/tutorials/webhooks/webhook#what-are-webhooks">​</a></h3>
<p>Webhooks enable real-time communication between applications by sending HTTP requests containing event data to specified
endpoints (webhook URLs) when events occur. They establish a direct communication channel, allowing applications to
receive instant updates and respond in a timely manner, promoting efficient integration between event-driven
systems.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="purpose-of-webhook-notifications-in-the-cloud-agent">Purpose of Webhook Notifications in the Cloud Agent<a class="hash-link" aria-label="Direct link to Purpose of Webhook Notifications in the Cloud Agent" title="Direct link to Purpose of Webhook Notifications in the Cloud Agent" href="/identus-docs/tutorials/webhooks/webhook#purpose-of-webhook-notifications-in-the-cloud-agent">​</a></h3>
<p>Webhook notifications in the CLoud Agent serve as a vital feature, enabling you to receive timely updates on various events
occurring within the agent. Webhooks allow you to receive HTTP requests containing event details at a specified
endpoint (webhook URL). These events are specifically related to the execution of
the <a href="/identus-docs/tutorials/connections/connection">Connect</a>, <a href="/identus-docs/tutorials/credentials/issue">Issue</a>,
and <a href="/identus-docs/tutorials/credentials/present-proof">Presentation</a> flows. Webhook notifications will be sent each time there is a
state
change during the execution of these protocols.</p>
<p>By leveraging webhooks, you can integrate the Cloud Agent seamlessly into your applications and systems. You can track and
monitor the progress of the main flows, receiving timely updates about changes and events.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-the-webhook-feature">Configuring the Webhook Feature<a class="hash-link" aria-label="Direct link to Configuring the Webhook Feature" title="Direct link to Configuring the Webhook Feature" href="/identus-docs/tutorials/webhooks/webhook#configuring-the-webhook-feature">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="enabling-the-webhook-feature">Enabling the Webhook Feature<a class="hash-link" aria-label="Direct link to Enabling the Webhook Feature" title="Direct link to Enabling the Webhook Feature" href="/identus-docs/tutorials/webhooks/webhook#enabling-the-webhook-feature">​</a></h3>
<p>There are two kinds of webhook notifications: global webhooks and wallet webhooks.
Global webhooks capture all events that happen on the Cloud Agent across all wallets,
whereas wallet webhooks only capture events that are specific to assets within a particular wallet.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="enable-global-webhook-using-environment-variables">Enable global webhook using environment variables<a class="hash-link" aria-label="Direct link to Enable global webhook using environment variables" title="Direct link to Enable global webhook using environment variables" href="/identus-docs/tutorials/webhooks/webhook#enable-global-webhook-using-environment-variables">​</a></h4>
<p>The Cloud Agent uses the following environment variables to manage global webhook notifications:</p>
<table><thead><tr><th>Name</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>GLOBAL_WEBHOOK_URL</code></td><td>The webhook endpoint URL where the notifications will be sent</td><td>null</td></tr><tr><td><code>GLOBAL_WEBHOOK_API_KEY</code></td><td>The optional API key (bearer token) to use as the <code>Authorization</code> header</td><td>null</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="enable-wallet-webhook-for-default-wallet-using-environment-variables">Enable wallet webhook for default wallet using environment variables<a class="hash-link" aria-label="Direct link to Enable wallet webhook for default wallet using environment variables" title="Direct link to Enable wallet webhook for default wallet using environment variables" href="/identus-docs/tutorials/webhooks/webhook#enable-wallet-webhook-for-default-wallet-using-environment-variables">​</a></h4>
<p>In a multi-tenant scenario, the Cloud Agent can optionally create a default wallet to simplify the development and deployment process.
The webhook configuration for this default wallet can be defined using environment variables.
After the default wallet is created, its webhook settings are stored in the system and are no longer influenced by these environment variables.</p>
<table><thead><tr><th>Name</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>DEFAULT_WALLET_ENABLED</code></td><td>Automatically create default on the Cloud Agent startup</td><td>true</td></tr><tr><td><code>DEFAULT_WALLET_WEBHOOK_URL</code></td><td>The webhook endpoint URL where the notifications will be sent</td><td>null</td></tr><tr><td><code>DEFAULT_WALLET_WEBHOOK_API_KEY</code></td><td>The optional API key (bearer token) to use as the <code>Authorization</code> header</td><td>null</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="enable-wallet-hook-using-rest-api">Enable wallet hook using REST API<a class="hash-link" aria-label="Direct link to Enable wallet hook using REST API" title="Direct link to Enable wallet hook using REST API" href="/identus-docs/tutorials/webhooks/webhook#enable-wallet-hook-using-rest-api">​</a></h4>
<p>In a multi-tenant scenario, there is an option to configure wallet webhook parameters using a REST API, which offers more flexibility.
For each individual wallet, users can create a new webhook by making a POST request to <code>/events/webhooks</code>,
which in turn creates a new webhook resource specific to their wallet.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl --location --request POST &#x27;http://localhost:8080/cloud-agent/events/webhooks&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --header &#x27;Content-Type: application/json&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --header &#x27;Accept: application/json&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --header &quot;apiKey: $API_KEY&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --data-raw &#x27;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;url&quot;: &quot;http://localhost:9095&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Response Example:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;id&quot;: &quot;e9569dd0-bffa-4be4-94fe-f5025a79029a&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;url&quot;: &quot;http://localhost:9095&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;customHeaders&quot;: {},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;createdAt&quot;: &quot;2023-09-12T08:39:03.871339Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="securing-the-webhook-endpoint">Securing the Webhook Endpoint<a class="hash-link" aria-label="Direct link to Securing the Webhook Endpoint" title="Direct link to Securing the Webhook Endpoint" href="/identus-docs/tutorials/webhooks/webhook#securing-the-webhook-endpoint">​</a></h3>
<p>It is essential to secure the webhook endpoint to protect the integrity and confidentiality of the event data. Consider
the following best practices when securing your webhook endpoint:</p>
<ul>
<li>Use HTTPS to encrypt communication between the Cloud Agent and the webhook endpoint.</li>
<li>Implement authentication mechanisms (e.g., API keys, tokens) to verify the authenticity of incoming requests.</li>
<li>Validate and sanitize incoming webhook requests to mitigate potential security risks.</li>
</ul>
<p>One of the authorization mechanism for the Cloud Agent&#x27;s webhook notifications is the bearer token. If
configured, the token will be included in the <code>Authorization</code> header of the HTTP request sent by the agent to the
webhook endpoint. You can configure this bearer token by setting the value of the
<code>GLOBAL_WEBHOOK_API_KEY</code> or <code>DEFAULT_WALLET_WEBHOOK_API_KEY</code> environment variable.</p>
<p>An alternative approach is to make use of the <code>customHeaders</code> property within the REST API for configuring webhooks.
This option offers increased flexibility when custom or multiple headers are needed.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="event-format-and-types">Event Format and Types<a class="hash-link" aria-label="Direct link to Event Format and Types" title="Direct link to Event Format and Types" href="/identus-docs/tutorials/webhooks/webhook#event-format-and-types">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="event-format">Event Format<a class="hash-link" aria-label="Direct link to Event Format" title="Direct link to Event Format" href="/identus-docs/tutorials/webhooks/webhook#event-format">​</a></h3>
<p>Webhook notifications from the Cloud Agent are sent as JSON payloads in the HTTP requests.</p>
<p>The event format is consistent across all events. Each event follows a common structure, while the &#x27;data&#x27; field
within the event payload contains information specific to the type of event. Here is an example of the JSON payload
format:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;id&quot;: &quot;cb8d4e96-30f0-4892-863f-44d49d634211&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;ts&quot;: &quot;2023-07-06T12:01:19.769427Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;type&quot;: &quot;xxxx&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Event-specific data goes here </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;walletId&quot;: &quot;00000000-0000-0000-0000-000000000000&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This event format ensures consistency and allows you to handle webhook notifications uniformly while easily extracting
the relevant data specific to each event type from the <code>data</code> field.</p>
<p>Here is a complete example of a webhook notification event related to a connection flow state change (invitation
generated):</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;id&quot;: &quot;cb8d4e96-30f0-4892-863f-44d49d634211&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;ts&quot;: &quot;2023-07-06T12:01:19.769427Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;type&quot;: &quot;ConnectionUpdated&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;connectionId&quot;: &quot;c10787cf-99bb-47f4-99bb-1fdcca32b673&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;label&quot;: &quot;Connect with Alice&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;role&quot;: &quot;Inviter&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;state&quot;: &quot;InvitationGenerated&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;invitation&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;id&quot;: &quot;c10787cf-99bb-47f4-99bb-1fdcca32b673&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;type&quot;: &quot;https://didcomm.org/out-of-band/2.0/invitation&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;from&quot;: &quot;did:peer:2.Ez6LS...jIiXX0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;invitationUrl&quot;: &quot;https://my.domain.com/path?_oob=eyJpZCI6...bXX19&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;createdAt&quot;: &quot;2023-07-06T12:01:19.760126Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;self&quot;: &quot;c10787cf-99bb-47f4-99bb-1fdcca32b673&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;kind&quot;: &quot;Connection&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;walletId&quot;: &quot;00000000-0000-0000-0000-000000000000&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-event-types">Common Event Types<a class="hash-link" aria-label="Direct link to Common Event Types" title="Direct link to Common Event Types" href="/identus-docs/tutorials/webhooks/webhook#common-event-types">​</a></h3>
<p>The Cloud Agent sends webhook notifications for events related to protocol state changes in
the <a href="/identus-docs/tutorials/connections/connection">Connect</a>, <a href="/identus-docs/tutorials/credentials/issue">Issue</a>,
<a href="/identus-docs/tutorials/credentials/present-proof">Presentation</a> flows, and also <a href="/identus-docs/tutorials/dids/publish">DID publication</a>
state changes. These events allow you to track the progress and updates within these flows in real-time.</p>
<p>The <code>id</code> field of the common event structure is the unique identifier (UUID) of the event and is randomly generated at
event creation time.</p>
<p>The <code>ts</code> field contains the timestamp (date + time) at which the event was created.</p>
<p>The <code>walletId</code> field contains information about the wallet from which the event originates.</p>
<p>The <code>type</code> field indicates to which flow/process the received event is related, and hence the type of JSON payload that
can be expected in the inner <code>data</code> field. Possible values are:</p>
<table><thead><tr><th>Value</th><th>Description</th></tr></thead><tbody><tr><td><code>ConnectionUpdated</code></td><td>An update in the connection flow state</td></tr><tr><td><code>IssueCredentialRecordUpdated</code></td><td>An update in the VC issuance flow state</td></tr><tr><td><code>PresentationUpdated</code></td><td>An update in the VC presentation flow state</td></tr><tr><td><code>DIDStatusUpdated</code></td><td>An update in the DID publication state</td></tr></tbody></table>
<p>State change notifications that you can expect to receive through webhook notifications include:</p>
<ul>
<li>Connection State Change: Notifies about state changes in the connection flow, such as <code>InvitationGenerated</code>,
<code>ConnectionRequestSent</code>, <code>ConnectionResponseReceived</code>, etc. Please refer to the <code>state</code> field of
the <a href="/identus-docs/agent-api/#tag/Connections-Management/operation/getConnection">connection resource</a>
for an exhaustive list of states.</li>
<li>Credential State Change: Indicates changes in the credential issuance flow, such as <code>OfferSent</code>, <code>RequestReceived</code>,
<code>CredentialSent</code>, etc. Please refer to the <code>protocolState</code> field of
the <a href="/identus-docs/agent-api/#tag/Issue-Credentials-Protocol/operation/getCredentialRecord">credential resource</a>
for an exhaustive list of states.</li>
<li>Presentation State Change: Notifies about changes in the presentation flow, such as <code>RequestReceived</code>,
<code>PresentationGenerated</code>, <code>PresentationVerified</code>, etc. Please refer to the <code>status</code> field of
the <a href="/identus-docs/agent-api/#tag/Present-Proof/operation/getPresentation">presentation resource</a> for an
exhaustive list of states.</li>
<li>DID State Change: Notifies about DID-related state changes. Currently, only the <code>Published</code> DID publication state
event will be notified.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="processing-webhook-notifications">Processing Webhook Notifications<a class="hash-link" aria-label="Direct link to Processing Webhook Notifications" title="Direct link to Processing Webhook Notifications" href="/identus-docs/tutorials/webhooks/webhook#processing-webhook-notifications">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="handling-incoming-webhook-requests">Handling Incoming Webhook Requests<a class="hash-link" aria-label="Direct link to Handling Incoming Webhook Requests" title="Direct link to Handling Incoming Webhook Requests" href="/identus-docs/tutorials/webhooks/webhook#handling-incoming-webhook-requests">​</a></h3>
<p>To handle incoming webhook notifications from the Cloud Agent in your application, follow these general steps:</p>
<ol>
<li>Receive the HTTP request at your specified webhook endpoint.</li>
<li>Parse the JSON payload of the request to extract the event details.</li>
<li>Process the event data according to your application&#x27;s requirements.</li>
<li>Send a response back to acknowledge the successful receipt of the webhook notification. For a successful reception,
the response status code should be <code>&gt;= 200</code> and <code>&lt; 300</code>. Any other response status code will lead to a new attempt
from the Cloud Agent.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="error-handling-and-retry-mechanisms">Error Handling and Retry Mechanisms<a class="hash-link" aria-label="Direct link to Error Handling and Retry Mechanisms" title="Direct link to Error Handling and Retry Mechanisms" href="/identus-docs/tutorials/webhooks/webhook#error-handling-and-retry-mechanisms">​</a></h3>
<p>When working with webhook notifications in the Cloud Agent, it is important to consider error handling and retry mechanisms.
In case of failed webhook notifications or errors, the Cloud Agent employs an automatic retry mechanism to ensure delivery.
The agent will attempt to send the webhook notification up to three times, with a five-second interval between each
attempt. Please note that the number of retries and the interval duration are currently not configurable in the Cloud Agent.</p>
<p>By default, this retry mechanism provides a reasonable level of reliability for delivering webhook notifications,
allowing for temporary network issues or intermittent failures.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-basic-webhook-implementation-for-logging-requests">A basic Webhook implementation for logging requests<a class="hash-link" aria-label="Direct link to A basic Webhook implementation for logging requests" title="Direct link to A basic Webhook implementation for logging requests" href="/identus-docs/tutorials/webhooks/webhook#a-basic-webhook-implementation-for-logging-requests">​</a></h3>
<p>In the following example, we will demonstrate a simple Python code snippet that sets up a webhook endpoint and logs
incoming HTTP requests to the console. This basic implementation can serve as a starting point for building more
advanced webhook systems.</p>
<p>In the provided Python code snippet, the port on which the webhook listener will listen for incoming requests should be
passed as a command-line parameter. This allows flexibility in starting multiple webhooks in parallel, which is useful
when testing multiple locally running agents, e.g. for a holder, an issuer, and/or a verifier.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#!/usr/bin/env python3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">Very simple HTTP server in python for logging requests</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">Usage::</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    ./server.py [&lt;port&gt;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> logging</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> http</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">server </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> BaseHTTPRequestHandler</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> HTTPServer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">grey </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;\x1b[38;20m&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yellow </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;\x1b[33;20m&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">green </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;\x1b[32;20m&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">red </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;\x1b[31;20m&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bold_red </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;\x1b[31;1m&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">reset </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;\x1b[0m&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">consoleHandler </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> logging</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">StreamHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">formatter </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> logging</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Formatter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;&quot;&quot;%(asctime)s - %(levelname)s - %(name)s</span><br></span><span class="token-line" style="color:#393A34"><span class="token string-interpolation string" style="color:#e3116c">--------------------------------------- request ---------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token string-interpolation string" style="color:#e3116c"></span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">green</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">%(method)s %(path)s</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">reset</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string-interpolation string" style="color:#e3116c">%(headers)s</span><br></span><span class="token-line" style="color:#393A34"><span class="token string-interpolation string" style="color:#e3116c"></span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">yellow</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">%(data)s</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">reset</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string-interpolation string" style="color:#e3116c">-----------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token string-interpolation string" style="color:#e3116c">&quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">consoleHandler</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">setFormatter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">formatter</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">consoleHandler</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">setLevel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">logging</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">INFO</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logger </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> logging</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">getLogger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;http-request&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">setLevel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">logging</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">INFO</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">addHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">consoleHandler</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">S</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">BaseHTTPRequestHandler</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">_set_response</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">send_response</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">send_header</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Content-type&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;text/html&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">end_headers</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">do_GET</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logging</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;GET request,\nPath: %s\nHeaders:\n%s\n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">headers</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">_set_response</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">wfile</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;GET request for {}&quot;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">encode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;utf-8&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">do_POST</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        content_length </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">headers</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;Content-Length&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;--- Gets the size of data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        post_data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">rfile</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">content_length</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;--- Gets the data itself</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        json_obj </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> json</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">loads</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">post_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;utf-8&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        json_data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> json</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dumps</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">json_obj</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> indent</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">msg</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;Request content&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> extra</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&#x27;method&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;POST&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&#x27;path&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&#x27;headers&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">headers</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&#x27;data&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> json_data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">_set_response</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">wfile</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;POST request for {}&quot;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">encode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;utf-8&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">log_message</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">format</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">pass</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">server_class</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">HTTPServer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> handler_class</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">S</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> port</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">80</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server_address </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> port</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    httpd </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> server_class</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">server_address</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> handler_class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        httpd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">serve_forever</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">except</span><span class="token plain"> KeyboardInterrupt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">pass</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    httpd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">server_close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;__main__&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> sys </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> argv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token builtin">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">argv</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">port</span><span class="token operator" style="color:#393A34">=</span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">argv</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">else</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion" href="/identus-docs/tutorials/webhooks/webhook#conclusion">​</a></h2>
<p>Congratulations! You&#x27;ve learned about webhook notifications in the Cloud Agent. By leveraging this feature, you can receive
real-time updates on events happening within the agent, enabling you to integrate the Cloud Agent seamlessly into your
applications. Remember to secure your webhook endpoint and handle webhook notifications effectively to maximize the
benefits of this feature.</p>
<p>Start integrating webhook notifications into your Cloud Agent workflow and unlock the power of real-time event updates!</p>
<p>If you have any further questions or need assistance, don&#x27;t hesitate to reach out to the Identus support team or
refer to the official documentation for more details.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/identus-docs/tutorials/secrets/seed-generation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Creating the Cloud Agent wallet seed</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/identus-docs/tutorials/multitenancy/tenant-onboarding"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Tenant Onboarding</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/identus-docs/tutorials/webhooks/webhook#introduction">Introduction</a></li><li><a class="table-of-contents__link toc-highlight" href="/identus-docs/tutorials/webhooks/webhook#understanding-webhook-notifications">Understanding Webhook Notifications</a><ul><li><a class="table-of-contents__link toc-highlight" href="/identus-docs/tutorials/webhooks/webhook#what-are-webhooks">What are Webhooks?</a></li><li><a class="table-of-contents__link toc-highlight" href="/identus-docs/tutorials/webhooks/webhook#purpose-of-webhook-notifications-in-the-cloud-agent">Purpose of Webhook Notifications in the Cloud Agent</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/identus-docs/tutorials/webhooks/webhook#configuring-the-webhook-feature">Configuring the Webhook Feature</a><ul><li><a class="table-of-contents__link toc-highlight" href="/identus-docs/tutorials/webhooks/webhook#enabling-the-webhook-feature">Enabling the Webhook Feature</a></li><li><a class="table-of-contents__link toc-highlight" href="/identus-docs/tutorials/webhooks/webhook#securing-the-webhook-endpoint">Securing the Webhook Endpoint</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/identus-docs/tutorials/webhooks/webhook#event-format-and-types">Event Format and Types</a><ul><li><a class="table-of-contents__link toc-highlight" href="/identus-docs/tutorials/webhooks/webhook#event-format">Event Format</a></li><li><a class="table-of-contents__link toc-highlight" href="/identus-docs/tutorials/webhooks/webhook#common-event-types">Common Event Types</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/identus-docs/tutorials/webhooks/webhook#processing-webhook-notifications">Processing Webhook Notifications</a><ul><li><a class="table-of-contents__link toc-highlight" href="/identus-docs/tutorials/webhooks/webhook#handling-incoming-webhook-requests">Handling Incoming Webhook Requests</a></li><li><a class="table-of-contents__link toc-highlight" href="/identus-docs/tutorials/webhooks/webhook#error-handling-and-retry-mechanisms">Error Handling and Retry Mechanisms</a></li><li><a class="table-of-contents__link toc-highlight" href="/identus-docs/tutorials/webhooks/webhook#a-basic-webhook-implementation-for-logging-requests">A basic Webhook implementation for logging requests</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/identus-docs/tutorials/webhooks/webhook#conclusion">Conclusion</a></li></ul></div></div></div></div></main></div></div></div><div class="container"><footer class="footer_J6tW"><svg xmlns="http://www.w3.org/2000/svg" width="145" height="38" fill="none"></svg><span class="copyright_C6JK">Hyperledger Identus CC BY 4.0</span></footer></div></div>
</body>
</html>