---
id: create-authentication-challenge
title: "Create new challenge to send for authentication to another party"
description: "Create new challenge state record. Optional `from` parameter could be"
sidebar_label: "Create new challenge to send for authentication to another party"
hide_title: true
hide_table_of_contents: true
api: {"tags":["Authenticate"],"operationId":"createAuthenticationChallenge","description":"Create new challenge state record. Optional `from` parameter could be \nprovided in request body to allow wallets to present who is sending \nchallenge.\n\nCreated challenge state record contains `challenge` field which should \nbe encoded and delivered to another party, usually in the form of a QR code. \n`challenge` object contains a random string (`nonce`) which holder needs \nto sign and post back to `submissionEndpoint` in `ChallengeSubmission` \nformat. Initial state is set to `pending`, and once valid response is \nreceived, state is set to `success` and `did` field is populated. In the \ncase of receiving invalid response from a wallet, either invalid \nresponse format or invalid signature, state is set to `error`.\n\n`id` is used to query for challenge state over time to detect terminal\nstate, either success or error. Once `success` is detected, application \ncould use submitted `did` to check if it is known in its system and act\nupon.\n","requestBody":{"required":false,"content":{"application/json":{"schema":{"properties":{"from":{"type":"string","example":"The App"}}}}}},"responses":{"200":{"description":"New authentication challenge state. `challenge` object should be encoded end transferred to the other party.","content":{"application/json":{"schema":{"type":"object","required":["self","kind","id","challenge","state","createdAt"],"properties":{"self":{"type":"string","example":"https://atala-prism-products.io/did-authentication/challenges/challenge-id-1234"},"kind":{"type":"string","example":"AuthenticationChallengeState"},"id":{"type":"string","example":"challenge-id-1234"},"did":{"type":"string","example":null},"challenge":{"type":"object","required":["type","submissionEndpoint","nonce","expireAt"],"properties":{"type":{"type":"string","example":"https://atalaprism.io/authentication-challenge"},"submissionEndpoint":{"type":"string","example":"https://demo.atalaprism.io:8085/did-authentication/challenge-submissions/challenge-id-1234"},"nonce":{"type":"string","example":"authenticate-NzIxZTZmNjQtOGY0Ni00ODQ4LWFhYjAtZGYzNDJmYzNlMjM2"},"from":{"type":"string","example":"The App"},"expireAt":{"type":"string","format":"date-time","example":"2021-10-31T09:22:23Z"}}},"state":{"type":"string","enum":["pending","success","error"]},"createdAt":{"type":"string","format":"date-time","example":"2021-10-31T09:22:23Z"},"updatedAt":{"type":"string","format":"date-time","example":"2021-12-31T13:59:60Z"}}}}}}},"method":"post","path":"/did-authentication/challenges","servers":[{"url":"https://k8s-dev.atalaprism.io/enterprise","description":"Development server"},{"url":"http://localhost:{port}","description":"Local server","variables":{"port":{"default":"8070"}}}],"security":[{"ApiKey":[]}],"securitySchemes":{"ApiKey":{"type":"apiKey","in":"header","name":"apikey"}},"jsonRequestBodyExample":{"from":"The App"},"info":{"title":"Enterprise Services OpenAPI specification","description":"Enterprise Services complements basic services offered by the Prism Agent. \nCurrently two products are part of this suite: __Onboard__ and \n__Authenticate__.\n\n__Onboard product__ enables organisations to request and get a DID from \nanother party. It is about onboarding people towards SSI based systems. The \nprocess happens out-of-band, meaning no DIDComm messaging is utilised. \nAcquired DID could be used to trigger various SSI based services such as \nauthentication with DID.\n\nOnboard flow:\n\n* Inviting party creates a DID request.\n* DID request is encoded, usually as a QR code or deep link, and sent to the\nother party over appropriate channel depending on the use case. \n* Receiving party uses their wallet to scan/receive DID request.\n* New DID is created by the wallet and sent back to the `onboardEndpoint` \nstated in DID request.\n* Inviting party binds received did with its system context, ie. with userId\n\n__Authenticate product__ enables authenticating users and things based on \nDIDs they control. This product offers APIs to create and track the state of \nan authentication challenge, which is sent to an authenticating party.\n\nAuthenticate flow:\n* Authentication challenge is created.\n* Challenge is encoded and sent to the other party over appropriate channel \ndepending on the use case. \n* Party which receives the challenge, needs to sign the `nonce` and to submit \n`signature` and `did` containing corresponding authentication public key to \nthe `submissionEndpoint` for verification.\n* Signature is verified and challenge state is updated accordingly.\n* Application can check if submitted signature is valid and if used did is \nknown, and act upon it. \n\nAuthentication challenge session is time constrained and has defined \nexpiration time.\n\nApplication has to acquire a DID and to bind it to its system context before \nor during authentication flow. Onboard product could be used for that purpose.\n\nWallets could use `did:peer` and `did:prism` for the time being.\n","version":"0.7.0"},"postman":{"name":"Create new challenge to send for authentication to another party","description":{"content":"Create new challenge state record. Optional `from` parameter could be \nprovided in request body to allow wallets to present who is sending \nchallenge.\n\nCreated challenge state record contains `challenge` field which should \nbe encoded and delivered to another party, usually in the form of a QR code. \n`challenge` object contains a random string (`nonce`) which holder needs \nto sign and post back to `submissionEndpoint` in `ChallengeSubmission` \nformat. Initial state is set to `pending`, and once valid response is \nreceived, state is set to `success` and `did` field is populated. In the \ncase of receiving invalid response from a wallet, either invalid \nresponse format or invalid signature, state is set to `error`.\n\n`id` is used to query for challenge state over time to detect terminal\nstate, either success or error. Once `success` is detected, application \ncould use submitted `did` to check if it is known in its system and act\nupon.\n","type":"text/plain"},"url":{"path":["did-authentication","challenges"],"host":["{{baseUrl}}"],"query":[],"variable":[]},"header":[{"key":"Content-Type","value":"application/json"},{"key":"Accept","value":"application/json"}],"method":"POST","body":{"mode":"raw","raw":"\"\"","options":{"raw":{"language":"json"}}}}}
sidebar_class_name: "post api-method"
info_path: documentation/api/enterprise-api/enterprise-services-openapi-specification
custom_edit_url: null
---

import ApiTabs from "@theme/ApiTabs";
import MimeTabs from "@theme/MimeTabs";
import ParamsItem from "@theme/ParamsItem";
import ResponseSamples from "@theme/ResponseSamples";
import SchemaItem from "@theme/SchemaItem";
import SchemaTabs from "@theme/SchemaTabs";
import DiscriminatorTabs from "@theme/DiscriminatorTabs";
import TabItem from "@theme/TabItem";

## Create new challenge to send for authentication to another party



Create new challenge state record. Optional `from` parameter could be 
provided in request body to allow wallets to present who is sending 
challenge.

Created challenge state record contains `challenge` field which should 
be encoded and delivered to another party, usually in the form of a QR code. 
`challenge` object contains a random string (`nonce`) which holder needs 
to sign and post back to `submissionEndpoint` in `ChallengeSubmission` 
format. Initial state is set to `pending`, and once valid response is 
received, state is set to `success` and `did` field is populated. In the 
case of receiving invalid response from a wallet, either invalid 
response format or invalid signature, state is set to `error`.

`id` is used to query for challenge state over time to detect terminal
state, either success or error. Once `success` is detected, application 
could use submitted `did` to check if it is known in its system and act
upon.


<MimeTabs><TabItem label={"application/json"} value={"application/json-schema"}><details style={{}} data-collapsed={false} open={true}><summary style={{"textAlign":"left"}}><strong>Request Body</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"from"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem></ul></details></TabItem></MimeTabs><div><ApiTabs><TabItem label={"200"} value={"200"}><div>

New authentication challenge state. `challenge` object should be encoded end transferred to the other party.

</div><div><MimeTabs schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs><TabItem label={"Schema"} value={"Schema"}><details style={{}} data-collapsed={false} open={true}><summary style={{"textAlign":"left"}}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"self"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"kind"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"id"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"did"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}}><summary style={{}}><strong>challenge</strong><span style={{"opacity":"0.6"}}> object</span></summary><div style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"type"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"submissionEndpoint"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"nonce"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"from"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"expireAt"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"date-time"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem></div></details></SchemaItem><SchemaItem collapsible={false} name={"state"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"string"} qualifierMessage={"**Possible values:** [`pending`, `success`, `error`]"} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"createdAt"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"date-time"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"updatedAt"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"date-time"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"self\": \"https://atala-prism-products.io/did-authentication/challenges/challenge-id-1234\",\n  \"kind\": \"AuthenticationChallengeState\",\n  \"id\": \"challenge-id-1234\",\n  \"did\": null,\n  \"challenge\": {\n    \"type\": \"https://atalaprism.io/authentication-challenge\",\n    \"submissionEndpoint\": \"https://demo.atalaprism.io:8085/did-authentication/challenge-submissions/challenge-id-1234\",\n    \"nonce\": \"authenticate-NzIxZTZmNjQtOGY0Ni00ODQ4LWFhYjAtZGYzNDJmYzNlMjM2\",\n    \"from\": \"The App\",\n    \"expireAt\": \"2021-10-31T09:22:23Z\"\n  },\n  \"state\": \"pending\",\n  \"createdAt\": \"2021-10-31T09:22:23Z\",\n  \"updatedAt\": \"2021-12-31T13:59:60Z\"\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem></ApiTabs></div>
      