<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-docs docs-version-current docs-doc-page docs-doc-id-documentation/adrs/decisions/2023-05-15-mediator-message-storage" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Mediator message storage | Hyperledger Identus</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://hyperledger-identus.github.io/docs/documentation/adrs/decisions/2023-05-15-mediator-message-storage"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-docs-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-docs-current"><meta data-rh="true" property="og:title" content="Mediator message storage | Hyperledger Identus"><meta data-rh="true" name="description" content="- Status: accepted"><meta data-rh="true" property="og:description" content="- Status: accepted"><link data-rh="true" rel="icon" href="/docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://hyperledger-identus.github.io/docs/documentation/adrs/decisions/2023-05-15-mediator-message-storage"><link data-rh="true" rel="alternate" href="https://hyperledger-identus.github.io/docs/documentation/adrs/decisions/2023-05-15-mediator-message-storage" hreflang="en"><link data-rh="true" rel="alternate" href="https://hyperledger-identus.github.io/docs/documentation/adrs/decisions/2023-05-15-mediator-message-storage" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Decision Records","item":"https://hyperledger-identus.github.io/docs/category/decision-records"},{"@type":"ListItem","position":2,"name":"Mediator message storage","item":"https://hyperledger-identus.github.io/docs/documentation/adrs/decisions/2023-05-15-mediator-message-storage"}]}</script><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BLNS09BXBY"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-BLNS09BXBY",{anonymize_ip:!0})</script><link rel="stylesheet" href="/docs/assets/css/styles.d504a8e9.css">
<script src="/docs/assets/js/runtime~main.01e18f5c.js" defer="defer"></script>
<script src="/docs/assets/js/main.002d7ccc.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><div class="navbar__logo"><img src="/docs/img/identus-navbar-light.png" alt="Identus logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/docs/img/identus-navbar-light.png" alt="Identus logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/docs/documentation/learn/">Learn</a><a class="navbar__item navbar__link" href="/docs/documentation/develop/">Develop</a><a class="navbar__item navbar__link" href="/docs/documentation/reference/">Reference</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item hidden-sidebar-item"><a class="menu__link" href="/docs/documentation/reference/"><span title="Reference" class="linkLabel_WmDU">Reference</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/category/sdks-1"><span title="SDKs" class="categoryLinkLabel_W154">SDKs</span></a><button aria-label="Expand sidebar category &#x27;SDKs&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/category/cloud-agent-api"><span title="Cloud Agent API" class="categoryLinkLabel_W154">Cloud Agent API</span></a><button aria-label="Expand sidebar category &#x27;Cloud Agent API&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/documentation/reference/specifications"><span title="Specifications" class="linkLabel_WmDU">Specifications</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://github.com/input-output-hk/prism-did-method-spec/blob/main/w3c-spec/PRISM-method.md" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK"><span title="PRISM DID Spec" class="linkLabel_WmDU">PRISM DID Spec</span><svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/docs/category/decision-records"><span title="Decision Records" class="categoryLinkLabel_W154">Decision Records</span></a><button aria-label="Collapse sidebar category &#x27;Decision Records&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2022-09-19-use-markdown-architectural-decision-records"><span title="Use Markdown Architectural Decision Records" class="linkLabel_WmDU">Use Markdown Architectural Decision Records</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2022-10-05-using-tapir-library-as-a-dsl-for-openapi-specification"><span title="Using tapir library as a DSL for OpenAPI specification" class="linkLabel_WmDU">Using tapir library as a DSL for OpenAPI specification</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2022-10-06-store-private-keys-of-issuers-inside-prism-agent"><span title="Store private keys of Issuers inside the Cloud Agent" class="linkLabel_WmDU">Store private keys of Issuers inside the Cloud Agent</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2023-01-18-quill-library-for-sql-statement-generation"><span title="Quill library for SQL statement generation and validation" class="linkLabel_WmDU">Quill library for SQL statement generation and validation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2023-04-05-did-linked-resources"><span title="DID-linked-resources" class="linkLabel_WmDU">DID-linked-resources</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2023-05-09-message-routing-for-multi-tenant"><span title="Routing Requests to the Correct Tenant" class="linkLabel_WmDU">Routing Requests to the Correct Tenant</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/documentation/adrs/decisions/2023-05-15-mediator-message-storage"><span title="Mediator message storage" class="linkLabel_WmDU">Mediator message storage</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2023-05-16-hierarchical-deterministic-key-generation-algorithm"><span title="Hierarchical deterministic key generation algorithm" class="linkLabel_WmDU">Hierarchical deterministic key generation algorithm</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2023-05-18-data-isolation-for-multitenancy"><span title="Data isolation for multi-tenancy" class="linkLabel_WmDU">Data isolation for multi-tenancy</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2023-05-27-use-keycloak-and-jwt-tokens-for-authentication-and-authorisation-to-facilitate-multitenancy-in-cloud-agent"><span title="Use Keycloak and JWT tokens for Authentication and Authorisation to facilitate multitenancy in the Cloud Agent" class="linkLabel_WmDU">Use Keycloak and JWT tokens for Authentication and Authorisation to facilitate multitenancy in the Cloud Agent</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2023-06-28-apollo-as-centralised-and-secure-cryptography-management-module"><span title="Apollo as centralised and secure cryptography management module" class="linkLabel_WmDU">Apollo as centralised and secure cryptography management module</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2023-07-14-performance-framework-for-atala-prism"><span title="Performance framework for the Identus platform" class="linkLabel_WmDU">Performance framework for the Identus platform</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2023-09-26-use-keycloak-authorisation-service-for-managing-wallet-permissions"><span title="Use keycloak authorisation service for managing wallet permissions" class="linkLabel_WmDU">Use keycloak authorisation service for managing wallet permissions</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2023-09-28-revocation-status-list-expansion-strategy"><span title="JWT credential revocation status list expansion strategy" class="linkLabel_WmDU">JWT credential revocation status list expansion strategy</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2024-01-03-use-jwt-claims-for-agent-admin-auth"><span title="Use JWT claims for agent admin access control" class="linkLabel_WmDU">Use JWT claims for agent admin access control</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2024-01-15-Error-handling-report-problem-agent"><span title="Error Handling Report Problem for Agent" class="linkLabel_WmDU">Error Handling Report Problem for Agent</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2024-01-16-use-zio-failures-and-defects-effectively"><span title="Use ZIO Failures and Defects Effectively" class="linkLabel_WmDU">Use ZIO Failures and Defects Effectively</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2024-03-07-handle-errors-in-bg-jobs-by-storing-on-state-records-and-sending-via-webhooks"><span title="Handle errors in background jobs by storing on state records and sending via webhooks" class="linkLabel_WmDU">Handle errors in background jobs by storing on state records and sending via webhooks</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2024-05-20-use-did-urls-to-reference-resources"><span title="Storage for SSI related resources" class="linkLabel_WmDU">Storage for SSI related resources</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sdk-ts/docs/decisions/sdk-package-release"><span title="SDK Package Release" class="linkLabel_WmDU">SDK Package Release</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sdk-ts/docs/decisions/template"><span title="[short title of solved problem and solution]" class="linkLabel_WmDU">[short title of solved problem and solution]</span></a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/category/decision-records"><span>Decision Records</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Mediator message storage</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Mediator message storage</h1></header>
<ul>
<li class="">Status: accepted</li>
<li class="">Deciders: Yurii Shynbuiev, Benjamin Voiturier, Shailesh Patil, Fabio Pinheiro , David Poltorak</li>
<li class="">Date: [2023-05-09]</li>
<li class="">Tags: storage, db, message, mongo, postgres, sql</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="context-and-problem-statement">Context and Problem Statement<a href="#context-and-problem-statement" class="hash-link" aria-label="Direct link to Context and Problem Statement" title="Direct link to Context and Problem Statement" translate="no">​</a></h2>
<p>Mediator storage
Relational databases like PostgreSQL store data in structured tables, with rows and columns that help establish relationships between various tables and entities.
SQL is used in PostgreSQL to save, retrieve, access, and manipulate the database data.
While PostgreSQL may be ideal for managing structured data streams, it tends to struggle when dealing with big unstructured data, as maintaining such relations can increase time complexity significantly.
Postgres SQL relies on relational data models that need to defined in advance
Change in any field in table requires lengthy process of migration scripts run and to maintain but it works there are tools available and we also use it PrismAgent,
But maintenance cost of software is higher.</p>
<p>Contrastingly, non-relational databases like MongoDB excel in these scenarios because data isn&#x27;t constrained to a single table.
This approach permits massive data streams to be imported directly into the system without the burden of setting up increasingly complex relationships and keys.
MongoDB typically stores data within documents using JSON (JavaScript Object Notation) or BSON (Binary JavaScript Object Notation), which simplifies the handling of big data and complex data streams.
document database supports a rapid, iterative cycle of development the way that a document database turns data into code.
MongoDB is faster at inserting and for queries that use nested references instead of joins
In Mediator the data which we send or receive is json message and to process json message we can avoid the unnecessary serialization and deserialization by having it stored in document database.
Postgres SQL by default in vertically scalable where as Mongo can scale horizontally, This can help in scalability problem
Mediator messages store in simple and straight forward write there is no transactional workflow involved so we don&#x27;t gain much by using relational db like postgres.</p>
<p>Below are the 2 options which we can use to reduce infrastructure management
MongoDB Atlas. Fully managed MongoDB in the cloud which can reduce the infrastructure management [<a href="https://www.mongodb.com/atlas/database" target="_blank" rel="noopener noreferrer" class="">https://www.mongodb.com/atlas/database</a>]<!-- -->
Amazon DocumentDB (with MongoDB compatibility)  [<a href="https://aws.amazon.com/documentdb/" target="_blank" rel="noopener noreferrer" class="">https://aws.amazon.com/documentdb/</a>]</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="decision-drivers">Decision Drivers<a href="#decision-drivers" class="hash-link" aria-label="Direct link to Decision Drivers" title="Direct link to Decision Drivers" translate="no">​</a></h2>
<ul>
<li class="">DIDCOMM messages are json based</li>
<li class="">flexibility to store the data</li>
<li class="">Reduce serialisation deserilisation of the data</li>
<li class="">Easy to write the json queries</li>
<li class="">scalability</li>
<li class="">low maintainance</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="considered-options">Considered Options<a href="#considered-options" class="hash-link" aria-label="Direct link to Considered Options" title="Direct link to Considered Options" translate="no">​</a></h2>
<ul>
<li class="">PostgresSQL (Storing unstructured data (JSON) and quering data (JSON), scalability)</li>
<li class="">MongoDB (Storing unstructured data (JSON) and quering data (JSON), scalability)</li>
<li class="">Kafka Stream (Storing unstructured data (JSON) and quering data (JSON), scalability and streaming)</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="decision-outcome">Decision Outcome<a href="#decision-outcome" class="hash-link" aria-label="Direct link to Decision Outcome" title="Direct link to Decision Outcome" translate="no">​</a></h2>
<p>Chosen option: MongoDB because of storing unstructured json data and json queries that requires minimal changes to the existing code and provides the benefits for the current use cases.
Is a NoSQL database that uses a document-oriented data model. Data is stored in a semi-structured format (BSON, similar to JSON), which can easily accommodate changes in data structure. This makes MongoDB particularly suitable for large volumes of data that may not be easily modeled in a relational schema.
Kafka Stream was also considered but current usecases are more towards storage of the messages, streaming is not the usecase for all the scenarios and the  mediator pickup protocol ([<a href="https://didcomm.org/pickup/3.0/" target="_blank" rel="noopener noreferrer" class="">https://didcomm.org/pickup/3.0/</a>])<!-- --> requirements need the flexibily to delete the messages read.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="positive-consequences">Positive Consequences<a href="#positive-consequences" class="hash-link" aria-label="Direct link to Positive Consequences" title="Direct link to Positive Consequences" translate="no">​</a></h3>
<ul>
<li class="">flexility to store unstructured data in json format</li>
<li class="">easy work with storage of unstrutured data and json queries</li>
<li class="">low cost for with no sql migrations required.</li>
<li class="">Uses a flexible, JSON-like query language. While this provides great flexibility</li>
<li class="">Is designed for easy horizontal scalability, which is achieved through sharding.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="negative-consequences">Negative Consequences<a href="#negative-consequences" class="hash-link" aria-label="Direct link to Negative Consequences" title="Direct link to Negative Consequences" translate="no">​</a></h3>
<ul>
<li class="">Extra infrastructure and additional resource to be maintained</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="pros-and-cons-of-the-options">Pros and Cons of the Options<a href="#pros-and-cons-of-the-options" class="hash-link" aria-label="Direct link to Pros and Cons of the Options" title="Direct link to Pros and Cons of the Options" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="mongodb">MongoDB<a href="#mongodb" class="hash-link" aria-label="Direct link to MongoDB" title="Direct link to MongoDB" translate="no">​</a></h3>
<p>MongoDB provides flexibility with json storage and queries</p>
<ul>
<li class="">Good, because it is horizontally scalable</li>
<li class="">Good, because typically performs better with large, unstructured datasets and write-heavy applications</li>
<li class="">Good, because have strong communities and extensive support materials, so you can expect to find help when you encounter issues.</li>
<li class="">Bad, Is not full ACID compliance</li>
<li class="">Bad, Doesn&#x27;t natively support complex joins like a relational database</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="refrences-used">Refrences used<a href="#refrences-used" class="hash-link" aria-label="Direct link to Refrences used" title="Direct link to Refrences used" translate="no">​</a></h2>
<ul>
<li class="">[<a href="https://www.plesk.com/blog/various/mongodb-vs-postgresql/" target="_blank" rel="noopener noreferrer" class="">https://www.plesk.com/blog/various/mongodb-vs-postgresql/</a>]</li>
<li class="">[<a href="https://www.dbvis.com/thetable/json-vs-jsonb-in-postgresql-a-complete-comparison/" target="_blank" rel="noopener noreferrer" class="">https://www.dbvis.com/thetable/json-vs-jsonb-in-postgresql-a-complete-comparison/</a>]</li>
<li class="">[<a href="https://severalnines.com/blog/overview-json-capabilities-within-postgresql/" target="_blank" rel="noopener noreferrer" class="">https://severalnines.com/blog/overview-json-capabilities-within-postgresql/</a>]</li>
<li class="">[<a href="https://www.mongodb.com/docs/manual/core/schema-validation/" target="_blank" rel="noopener noreferrer" class="">https://www.mongodb.com/docs/manual/core/schema-validation/</a>]</li>
<li class="">[<a href="https://www.mongodb.com/compare/mongodb-dynamodb" target="_blank" rel="noopener noreferrer" class="">https://www.mongodb.com/compare/mongodb-dynamodb</a>]</li>
<li class="">[<a href="https://www.projectpro.io/article/dynamodb-vs-mongodb/826" target="_blank" rel="noopener noreferrer" class="">https://www.projectpro.io/article/dynamodb-vs-mongodb/826</a>]</li>
</ul></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/documentation/adrs/decisions/2023-05-09-message-routing-for-multi-tenant"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Routing Requests to the Correct Tenant</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/documentation/adrs/decisions/2023-05-16-hierarchical-deterministic-key-generation-algorithm"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Hierarchical deterministic key generation algorithm</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#context-and-problem-statement" class="table-of-contents__link toc-highlight">Context and Problem Statement</a></li><li><a href="#decision-drivers" class="table-of-contents__link toc-highlight">Decision Drivers</a></li><li><a href="#considered-options" class="table-of-contents__link toc-highlight">Considered Options</a></li><li><a href="#decision-outcome" class="table-of-contents__link toc-highlight">Decision Outcome</a><ul><li><a href="#positive-consequences" class="table-of-contents__link toc-highlight">Positive Consequences</a></li><li><a href="#negative-consequences" class="table-of-contents__link toc-highlight">Negative Consequences</a></li></ul></li><li><a href="#pros-and-cons-of-the-options" class="table-of-contents__link toc-highlight">Pros and Cons of the Options</a><ul><li><a href="#mongodb" class="table-of-contents__link toc-highlight">MongoDB</a></li></ul></li><li><a href="#refrences-used" class="table-of-contents__link toc-highlight">Refrences used</a></li></ul></div></div></div></div></main></div></div></div><div class="container"><footer class="footer_J6tW"><svg xmlns="http://www.w3.org/2000/svg" width="145" height="38" fill="none"></svg><span class="copyright_C6JK">Hyperledger Identus CC BY 4.0</span></footer></div></div>
</body>
</html>