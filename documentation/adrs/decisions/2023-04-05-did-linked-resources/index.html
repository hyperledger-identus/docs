<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-docs docs-version-current docs-doc-page docs-doc-id-documentation/adrs/decisions/2023-04-05-did-linked-resources" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">DID-linked-resources | Hyperledger Identus</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://hyperledger-identus.github.io/docs/documentation/adrs/decisions/2023-04-05-did-linked-resources"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-docs-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-docs-current"><meta data-rh="true" property="og:title" content="DID-linked-resources | Hyperledger Identus"><meta data-rh="true" name="description" content="- Status: draft"><meta data-rh="true" property="og:description" content="- Status: draft"><link data-rh="true" rel="icon" href="/docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://hyperledger-identus.github.io/docs/documentation/adrs/decisions/2023-04-05-did-linked-resources"><link data-rh="true" rel="alternate" href="https://hyperledger-identus.github.io/docs/documentation/adrs/decisions/2023-04-05-did-linked-resources" hreflang="en"><link data-rh="true" rel="alternate" href="https://hyperledger-identus.github.io/docs/documentation/adrs/decisions/2023-04-05-did-linked-resources" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Decision Records","item":"https://hyperledger-identus.github.io/docs/category/decision-records"},{"@type":"ListItem","position":2,"name":"DID-linked-resources","item":"https://hyperledger-identus.github.io/docs/documentation/adrs/decisions/2023-04-05-did-linked-resources"}]}</script><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BLNS09BXBY"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-BLNS09BXBY",{anonymize_ip:!0})</script><link rel="stylesheet" href="/docs/assets/css/styles.d504a8e9.css">
<script src="/docs/assets/js/runtime~main.1f4871ff.js" defer="defer"></script>
<script src="/docs/assets/js/main.67b3e93d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><div class="navbar__logo"><img src="/docs/img/identus-navbar-light.png" alt="Identus logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/docs/img/identus-navbar-light.png" alt="Identus logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/docs/documentation/learn/">Learn</a><a class="navbar__item navbar__link" href="/docs/documentation/develop/">Develop</a><a class="navbar__item navbar__link" href="/docs/documentation/reference/">Reference</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item hidden-sidebar-item"><a class="menu__link" href="/docs/documentation/reference/"><span title="Reference" class="linkLabel_WmDU">Reference</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/category/sdks-1"><span title="SDKs" class="categoryLinkLabel_W154">SDKs</span></a><button aria-label="Expand sidebar category &#x27;SDKs&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/category/cloud-agent-api"><span title="Cloud Agent API" class="categoryLinkLabel_W154">Cloud Agent API</span></a><button aria-label="Expand sidebar category &#x27;Cloud Agent API&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/documentation/reference/specifications"><span title="Specifications" class="linkLabel_WmDU">Specifications</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://github.com/input-output-hk/prism-did-method-spec/blob/main/w3c-spec/PRISM-method.md" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK"><span title="PRISM DID Spec" class="linkLabel_WmDU">PRISM DID Spec</span><svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/docs/category/decision-records"><span title="Decision Records" class="categoryLinkLabel_W154">Decision Records</span></a><button aria-label="Collapse sidebar category &#x27;Decision Records&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2022-09-19-use-markdown-architectural-decision-records"><span title="Use Markdown Architectural Decision Records" class="linkLabel_WmDU">Use Markdown Architectural Decision Records</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2022-10-05-using-tapir-library-as-a-dsl-for-openapi-specification"><span title="Using tapir library as a DSL for OpenAPI specification" class="linkLabel_WmDU">Using tapir library as a DSL for OpenAPI specification</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2022-10-06-store-private-keys-of-issuers-inside-prism-agent"><span title="Store private keys of Issuers inside the Cloud Agent" class="linkLabel_WmDU">Store private keys of Issuers inside the Cloud Agent</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2023-01-18-quill-library-for-sql-statement-generation"><span title="Quill library for SQL statement generation and validation" class="linkLabel_WmDU">Quill library for SQL statement generation and validation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/documentation/adrs/decisions/2023-04-05-did-linked-resources"><span title="DID-linked-resources" class="linkLabel_WmDU">DID-linked-resources</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2023-05-09-message-routing-for-multi-tenant"><span title="Routing Requests to the Correct Tenant" class="linkLabel_WmDU">Routing Requests to the Correct Tenant</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2023-05-15-mediator-message-storage"><span title="Mediator message storage" class="linkLabel_WmDU">Mediator message storage</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2023-05-16-hierarchical-deterministic-key-generation-algorithm"><span title="Hierarchical deterministic key generation algorithm" class="linkLabel_WmDU">Hierarchical deterministic key generation algorithm</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2023-05-18-data-isolation-for-multitenancy"><span title="Data isolation for multi-tenancy" class="linkLabel_WmDU">Data isolation for multi-tenancy</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2023-05-27-use-keycloak-and-jwt-tokens-for-authentication-and-authorisation-to-facilitate-multitenancy-in-cloud-agent"><span title="Use Keycloak and JWT tokens for Authentication and Authorisation to facilitate multitenancy in the Cloud Agent" class="linkLabel_WmDU">Use Keycloak and JWT tokens for Authentication and Authorisation to facilitate multitenancy in the Cloud Agent</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2023-06-28-apollo-as-centralised-and-secure-cryptography-management-module"><span title="Apollo as centralised and secure cryptography management module" class="linkLabel_WmDU">Apollo as centralised and secure cryptography management module</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2023-07-14-performance-framework-for-atala-prism"><span title="Performance framework for the Identus platform" class="linkLabel_WmDU">Performance framework for the Identus platform</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2023-09-26-use-keycloak-authorisation-service-for-managing-wallet-permissions"><span title="Use keycloak authorisation service for managing wallet permissions" class="linkLabel_WmDU">Use keycloak authorisation service for managing wallet permissions</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2023-09-28-revocation-status-list-expansion-strategy"><span title="JWT credential revocation status list expansion strategy" class="linkLabel_WmDU">JWT credential revocation status list expansion strategy</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2024-01-03-use-jwt-claims-for-agent-admin-auth"><span title="Use JWT claims for agent admin access control" class="linkLabel_WmDU">Use JWT claims for agent admin access control</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2024-01-15-Error-handling-report-problem-agent"><span title="Error Handling Report Problem for Agent" class="linkLabel_WmDU">Error Handling Report Problem for Agent</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2024-01-16-use-zio-failures-and-defects-effectively"><span title="Use ZIO Failures and Defects Effectively" class="linkLabel_WmDU">Use ZIO Failures and Defects Effectively</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2024-03-07-handle-errors-in-bg-jobs-by-storing-on-state-records-and-sending-via-webhooks"><span title="Handle errors in background jobs by storing on state records and sending via webhooks" class="linkLabel_WmDU">Handle errors in background jobs by storing on state records and sending via webhooks</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/documentation/adrs/decisions/2024-05-20-use-did-urls-to-reference-resources"><span title="Storage for SSI related resources" class="linkLabel_WmDU">Storage for SSI related resources</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sdk-ts/docs/decisions/sdk-package-release"><span title="SDK Package Release" class="linkLabel_WmDU">SDK Package Release</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sdk-ts/docs/decisions/template"><span title="[short title of solved problem and solution]" class="linkLabel_WmDU">[short title of solved problem and solution]</span></a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/category/decision-records"><span>Decision Records</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">DID-linked-resources</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>DID-linked-resources</h1></header>
<ul>
<li class="">Status: draft</li>
<li class="">Deciders: Yurii Shynbuiev, Benjamin Voiturier, Lohan Spies, Ezequiel Postan, Shota Jolbordi</li>
<li class="">Date: 2023-04-05</li>
<li class="">Tags: did, linked-data, ledger</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="target">Target<a href="#target" class="hash-link" aria-label="Direct link to Target" title="Direct link to Target" translate="no">​</a></h2>
<p><a href="https://input-output.atlassian.net/browse/ATL-3186" target="_blank" rel="noopener noreferrer" class="">Research Spike - Schema and Verifiable Presentation Registry</a></p>
<ul>
<li class="">Provide a clear and concise analysis of the various schema registry implementation and the associated benefits and downfalls of each approach.</li>
<li class="">Provide a concrete proposal for what we would like to implement for the Identus platform.</li>
<li class="">Provide a generic way of storing and linking the resources for the DID in the Identus platform.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="context-and-problem-statement">Context and Problem Statement<a href="#context-and-problem-statement" class="hash-link" aria-label="Direct link to Context and Problem Statement" title="Direct link to Context and Problem Statement" translate="no">​</a></h2>
<p>Identus platform must be able to store and distribute the various resources such as credential schemas, logos, revocation status lists, and documents (aka any text, JSON, images, etc). But in the scope of the current ADR the following resource types are discussed:</p>
<ul>
<li class="">credential schema (JSON and AnonCreds)</li>
<li class="">credential definition (AnonCreds)</li>
<li class="">revocation list</li>
</ul>
<p><strong>NOTE</strong>: Resources containing the PII must never be stored on-chain.</p>
<p>Requirements for storing and distributing resources:</p>
<ul>
<li class="">Decentralization - resources must be stored in decentralized storage</li>
<li class="">Discoverability - it should be possible to discover the resource</li>
<li class="">Longevity - the ability of a storage solution to maintain the availability and integrity of stored resources</li>
<li class="">Interoperability - it should be possible for other SSI systems to fetch the resource</li>
<li class="">Trust - resources must be stored in reliable tamper-proof storage and be trusted by other SSI systems</li>
</ul>
<p>Other requirements, such as <code>versioning</code>, <code>security</code> and <code>immutability</code> are out of the scope of this ADR:</p>
<ul>
<li class="">Versioning - is a specific requirement for the particular resource and belongs to the resource metadata</li>
<li class="">Security - is an important aspect that must be taken into account by the underlying storage system and data access layer</li>
<li class="">Immutability - is one of the strategies to guarantee <code>trust</code> and `decentralisation``, but it shouldn&#x27;t be a requirement by itself.</li>
</ul>
<p>The technical solution contains a lot of variations and particular small decisions but overall it can be split into two main questions:</p>
<ul>
<li class="">where the resource is stored?</li>
<li class="">how the resource is discovered and fetched?</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="constraints">Constraints<a href="#constraints" class="hash-link" aria-label="Direct link to Constraints" title="Direct link to Constraints" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="storage-limitations">Storage limitations<a href="#storage-limitations" class="hash-link" aria-label="Direct link to Storage limitations" title="Direct link to Storage limitations" translate="no">​</a></h3>
<p>All decentralized storage (DLT or IPFS) has storage limitations, and the amount of data that can be stored is limited by the available storage capacity and the way how the resources are stored.</p>
<p>The following aspect must be taken into account for storing the resources in DLT:</p>
<ul>
<li class="">transaction size limit (can be mitigated by data fragmentation, so the single resource is stored in multiple transactions) - 16KB, 32KB, 64KB, up to 1MB - depending on the type of the blockchain</li>
<li class="">throughput - bytes we can insert to storage per unit of time</li>
<li class="">latency - multi-second time per insert</li>
<li class="">cost - each insertion costs fees</li>
</ul>
<p>Based on the nature of the resource the size limitations must be considered.</p>
<p>For the following resource types and the common use cases 16KB should be enough, so it&#x27;s possible to store these on DLT:</p>
<ul>
<li class="">credential schema</li>
<li class="">credential definition</li>
<li class="">logo in SVG format</li>
<li class="">Merkle Tree</li>
<li class="">documentation in the markdown format</li>
</ul>
<p>For larger resource types IPFS or another option should be considered. Large resource examples:</p>
<ul>
<li class="">media files</li>
<li class="">large documents</li>
<li class="">large revocation status lists</li>
</ul>
<p>IPFS doesn&#x27;t have a size limitation (it&#x27;s limited by the underlying storage or the particular SDK) and requires additional infrastructure and <code>incentives</code> (the way to pay for the storage) from the community.</p>
<p>IPFS can be used for storing the resources, but it should be covered in the scope of separated ADR.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="scalability">Scalability<a href="#scalability" class="hash-link" aria-label="Direct link to Scalability" title="Direct link to Scalability" translate="no">​</a></h3>
<p>While DLT and IPFS are designed for scalability, they can still face issues with scalability when it comes to storing SSI resources. As more users store their SSI resources on these platforms, it can become more difficult to scale the infrastructure to handle the increased demand.</p>
<p>To mitigate the scalability challenge the <code>hybrid</code> solution can be considered. In this case, the resource is stored in the centralized database or IPFS system, and the <code>hash</code>, <code>signature</code> or other metadata that guarantees the <code>trust</code> is stored on-chain.</p>
<p>Storing credential schemas, and logos, not large documents don&#x27;t require the hybrid solution, so the use cases for it is out of scope in the current ADR.</p>
<p>Scalability issues also must be considered in the decision for linking the resources to the DID. For instance, the Cheqd solution keeps all the resources linked to the DID inside of the metadata of the DIDDoc which leads to growing the DIDDoc size after some period and an update of the DID Document when the new resource is published on-chain and linked to the DID.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="access-control">Access control<a href="#access-control" class="hash-link" aria-label="Direct link to Access control" title="Direct link to Access control" translate="no">​</a></h3>
<p>SSI resources stored in DLT and IPFS can be accessed by anyone who has access to the network.</p>
<p>This can be a security concern for organizations that need to control access to their SSI resources.</p>
<p>Access control also can be an issue for interoperability with other SSI systems.</p>
<p>The types of resources such as credential schemas, logos, and revocation lists should be available without additional access control.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="data-privacy">Data privacy<a href="#data-privacy" class="hash-link" aria-label="Direct link to Data privacy" title="Direct link to Data privacy" translate="no">​</a></h3>
<p>While DLT and IPFS are designed to be secure, there is still a risk that SSI resources stored on these platforms could be accessed or stolen by unauthorized parties.</p>
<p>This is especially concerning when it comes to sensitive personal information.</p>
<p>Personal data or any other sensitive information should not be stored on-chain and be available for unauthorized parties.</p>
<p>Credential schemas, documents, and logos usually do not contain personal data, so can be stored on-chain.</p>
<p>Revocation lists that are designed using privacy-preserving capabilities can be stored on-chain as well.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="decision-drivers">Decision Drivers<a href="#decision-drivers" class="hash-link" aria-label="Direct link to Decision Drivers" title="Direct link to Decision Drivers" translate="no">​</a></h2>
<ul>
<li class="">Interoperability</li>
<li class="">Trust</li>
<li class="">Longevity</li>
<li class="">Scalability</li>
<li class="">Discoverability</li>
<li class="">Vendor Lock</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="storage">Storage<a href="#storage" class="hash-link" aria-label="Direct link to Storage" title="Direct link to Storage" translate="no">​</a></h2>
<p>Choosing the right storage for resources is an architectural decision.</p>
<p>Companies that build SSI platforms usually use the underlying blockchain for storing the resources in a generic way and an API layer with an underlying centralized database and SDK for indexing, and access to the resources.</p>
<p>Usually, resources are stored efficiently (any binary format, protobuf, CBOR) on-chain to reduce the size and the cost of the operation.</p>
<p>The application layer that communicates with the underlying blockchain is used for publishing and retrieval of the resource.
Based on concrete implementation, the resources can be decoded and indexed in the database and available via internal API, SDI, or Universal Resolver.</p>
<p>Storing resources off-chain also makes sense, but in this case, the <code>longevity</code> of the storage and an API layer is limited by the lifetime of the organization that published the resource. For this solution, <code>trust</code> can be achieved by signing the resource using the key of the DID stored on-chain. This solution is not fully centralized as the organizations have their infrastructure with the database.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="linking-the-resource-to-the-did">Linking the resource to the DID<a href="#linking-the-resource-to-the-did" class="hash-link" aria-label="Direct link to Linking the resource to the DID" title="Direct link to Linking the resource to the DID" translate="no">​</a></h2>
<p>Linking a resource to a DID means associating a specific resource with a DID and resolving the resource via the Universal Resolver or application API or SDK or finding it on-chain.</p>
<p>In all the considered solutions this is achieved using a DID document and the algorithm for discovery and resource dereferencing.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="considered-options">Considered Options<a href="#considered-options" class="hash-link" aria-label="Direct link to Considered Options" title="Direct link to Considered Options" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="did-document-linkedresources-field">DID document linkedResources field<a href="#did-document-linkedresources-field" class="hash-link" aria-label="Direct link to DID document linkedResources field" title="Direct link to DID document linkedResources field" translate="no">​</a></h3>
<p>The particular resource must be available via URL and the metadata of the resource are described in the <code>linkedResources</code> array.</p>
<p>Example:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;@context&quot;: &quot;https://w3id.org/did/v1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;id&quot;: &quot;did:example:123456789abcdefghi&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;publicKey&quot;: [{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;id&quot;: &quot;did:example:123456789abcdefghi#keys-1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;type&quot;: &quot;Ed25519VerificationKey2018&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;controller&quot;: &quot;did:example:123456789abcdefghi&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;publicKeyBase58&quot;: &quot;7dNN1A8H4DwPU1h4btvohGadnbx8sHF2U6XJU6vLBBfA&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;linkedResources&quot;: [{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;url&quot;: &quot;https://example.com/credentialschema/123&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;type&quot;: &quot;CredentialSchema&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;name&quot;: &quot;DrivingLicense&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="positive-consequences">Positive Consequences<a href="#positive-consequences" class="hash-link" aria-label="Direct link to Positive Consequences" title="Direct link to Positive Consequences" translate="no">​</a></h4>
<ul>
<li class="">solution describes the simple way of linking the resources to the DID Document. This approach looks outdated and is not part of the did-core specification.</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="negative-consequences">Negative Consequences<a href="#negative-consequences" class="hash-link" aria-label="Direct link to Negative Consequences" title="Direct link to Negative Consequences" translate="no">​</a></h4>
<p>The drawbacks of the solution:</p>
<ul>
<li class="">interoperability: it is not a part of the DID-core specification anymore even if it is possible to find information about it</li>
<li class="">interoperability: the resource should be fetched by the application or SDK</li>
<li class="">trust: must be guaranteed by the underlying DLT, the DID document should have an anchor: hash, signature or Tx id that references to the DLT</li>
<li class="">discoverability: information about the resource&#x27;s metadata (author, version, content type) is absent</li>
<li class="">scalability: DID document must be updated when a new resource is added, so the solution sacrifices <code>scalability</code> as the content of the DID document will grow</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="out-of-the-scope">Out of the Scope<a href="#out-of-the-scope" class="hash-link" aria-label="Direct link to Out of the Scope" title="Direct link to Out of the Scope" translate="no">​</a></h4>
<ul>
<li class="">longevity: should be guaranteed by the underlying DLT</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="did-document-diddocumentmetadata---linkedresourcemetadata-cheqd-adr">DID document didDocumentMetadata -&gt; linkedResourceMetadata (Cheqd ADR)<a href="#did-document-diddocumentmetadata---linkedresourcemetadata-cheqd-adr" class="hash-link" aria-label="Direct link to DID document didDocumentMetadata -&gt; linkedResourceMetadata (Cheqd ADR)" title="Direct link to DID document didDocumentMetadata -&gt; linkedResourceMetadata (Cheqd ADR)" translate="no">​</a></h3>
<p>Each resource entry is a part of the collection and is described in the <code>linkedResourceMetadata</code> field.</p>
<p>The solution is described in the Cheqd ARD in the <a href="#links" class="">Links</a> section of the current ADR</p>
<p>Example:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &quot;didDocumentMetadata&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;linkedResourceMetadata&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;resourceURI&quot;: &quot;did:cheqd:mainnet:1f8e08a2-eeb6-40c3-9e01-33e4a0d1479d/resources/f3d39687-69f5-4046-a960-3aae86a0d3ca&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;resourceCollectionId&quot;: &quot;1f8e08a2-eeb6-40c3-9e01-33e4a0d1479d&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;resourceId&quot;: &quot;f3d39687-69f5-4046-a960-3aae86a0d3ca&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;resourceName&quot;: &quot;PassportSchema&quot;, // First version of a Resource called PassportSchema</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;resourceType&quot;: &quot;CL-Schema&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;mediaType&quot;: &quot;application/json&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;created&quot;: &quot;2022-07-19T08:40:00Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;checksum&quot;: &quot;7b2022636f6e74656e74223a202274657374206461746122207d0ae3b0c44298&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;previousVersionId&quot;: null, // null if no previous version, otherwise, resourceId of previous version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;nextVersionId&quot;: null, // null if no new version, otherwise, resourceId of new version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>The solution is not fully interoperable with the SSI ecosystem, but it&#x27;s probably the first successful specification that formalizes the DID-linked resources and the DID URL.</p>
<p>Cheqd&#x27;s approach for linking the resources to the DID is not a part of the current version of DID specification. Even if it&#x27;s possible to find some information about <code>linkedResources</code> and <code>linkedResourceMetadata</code> optional field of the DIDDoc in the cache of the search system or ChatGPT.</p>
<p>Looks like the ToIP specification is inspired by Cheqd&#x27;s ADR.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="positive-consequences-1">Positive Consequences<a href="#positive-consequences-1" class="hash-link" aria-label="Direct link to Positive Consequences" title="Direct link to Positive Consequences" translate="no">​</a></h4>
<ul>
<li class="">versioning of the resource, as metadata contains the references to the previous and next version</li>
<li class="">collection definition is formalized and published on-chain and in the DID document, so all the resources are categorized</li>
<li class="">discoverability: URI is replaced with DID URL that allows discovering the resource using Internal and/or Universal resolver</li>
<li class="">trust: the <code>checksum</code> is provided, so it is possible to verify that the resource was not modified by 3rd party</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="negative-consequences-1">Negative Consequences<a href="#negative-consequences-1" class="hash-link" aria-label="Direct link to Negative Consequences" title="Direct link to Negative Consequences" translate="no">​</a></h4>
<ul>
<li class="">scalability: the DID document should be updated when the new resource is created</li>
<li class="">interoperability: using the Universal Resolver is optional, so either SDK or internal application API must be used to fetch the resource</li>
<li class="">standard: the <code>linkedResourceMetadata</code> field is not a standard part of the DID specification, so the application should be aware of how to deal with it</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="did-url-dereferencing-w3c-specification">DID URL dereferencing (W3C specification)<a href="#did-url-dereferencing-w3c-specification" class="hash-link" aria-label="Direct link to DID URL dereferencing (W3C specification)" title="Direct link to DID URL dereferencing (W3C specification)" translate="no">​</a></h3>
<p>The current solution is based on the dereferencing algorithm described in the <a href="https://w3c-ccg.github.io/did-resolution/#dereferencing" target="_blank" rel="noopener noreferrer" class="">DID-Resolution#dereferencing</a> specification and describes how the DID resolver can dereference the resource linked to the DID. It does not describe where the resource is stored.</p>
<p>The main idea is an algorithm that allows using the DID URL and the information about the services in the DID Document that allows DID Resolver to compose the final resource URL and return the requested resource.</p>
<p>Dereference is performed by defining the service <code>id</code> and <code>relativeRef</code> params or <code>path</code> in the DID URL</p>
<p><strong>NOTE:</strong>
The <code>service.type</code> property is not taken into account in this flow.
According to the did-core specification, the service type and its associated properties SHOULD be registered in the <a href="https://www.w3.org/TR/did-spec-registries/#service-types" target="_blank" rel="noopener noreferrer" class="">DID Specification Registries</a>.
So, defining and registering the <code>schemaService</code> or <code>resourceService</code> should be the next step to facilitate the interoperability of SSI systems.</p>
<p>Example 1: using <code>service</code> and <code>relativeRef</code></p>
<p>The credential schema resource can be defined as a DID URL</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">did:prism:abcdefg?service=credentialschema&amp;relativeRef=%2Fcredentialschemas%2F123e4567-e89b-12d3-a456-426614174000</span><br></span></code></pre></div></div>
<p>and the DID Document must have the service defined</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;service&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;id&quot;: &quot;did:prism:abcdefg#credentialschema&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;type&quot;: &quot;CredentialSchema&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;serviceEndpoint&quot;: &quot;https://agent.example.com/schema-registry&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>so, the Universal Resolver using the concrete DID resolver must dereference the resource as</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">https://agent.example.com/schema-registry/credentialschemas/F123e4567-e89b-12d3-a456-426614174000</span><br></span></code></pre></div></div>
<p>and should return the instance of the credential schema</p>
<p>Example 2: is another variation but using <code>service</code> and <code>path</code> in the DID URL</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">did:prism:abcdefg/credentialschemas/123e4567-e89b-12d3-a456-426614174000?service=credentialschema</span><br></span></code></pre></div></div>
<p>In this case, the DID Method may describe how the path should be resolved and the resource must be fetched.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="positive-consequences-2">Positive Consequences<a href="#positive-consequences-2" class="hash-link" aria-label="Direct link to Positive Consequences" title="Direct link to Positive Consequences" translate="no">​</a></h4>
<ul>
<li class="">interoperability: the resource is resolved by the conformant DID resolver according to the specification</li>
<li class="">discoverability: the resource defined in DID URL is resolved and fetched dynamically</li>
<li class="">scalability: the DID document is not updated for each new resource</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="negative-consequences-2">Negative Consequences<a href="#negative-consequences-2" class="hash-link" aria-label="Direct link to Negative Consequences" title="Direct link to Negative Consequences" translate="no">​</a></h4>
<ul>
<li class="">specification: for the particular cases when the <code>path</code> is used in the DID URL, the resolution behavior must be described in the DID Method</li>
<li class="">scalability: the algorithm contains 2 or 3 steps and the DID Document is always must be resolved in the first step</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="out-of-the-scope-1">Out of the Scope<a href="#out-of-the-scope-1" class="hash-link" aria-label="Direct link to Out of the Scope" title="Direct link to Out of the Scope" translate="no">​</a></h4>
<ul>
<li class="">trust, longevity, and technology stack are not specified in this solution</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="did-url-dereferencing-trust-over-ip-specification---outdated">DID URL Dereferencing (Trust over IP specification - outdated)<a href="#did-url-dereferencing-trust-over-ip-specification---outdated" class="hash-link" aria-label="Direct link to DID URL Dereferencing (Trust over IP specification - outdated)" title="Direct link to DID URL Dereferencing (Trust over IP specification - outdated)" translate="no">​</a></h3>
<p><a href="https://wiki.trustoverip.org/display/HOME/DID+URL+Resource+Parameter+Specification" target="_blank" rel="noopener noreferrer" class="">ToIP specification</a> is an analog of the W3C dereferencing specification and describes the convention for dereferencing the resources from the DID URL</p>
<p>The main idea is the same: use the DID URL and a combination of convention and the DID method to resolve the digital resource associated with the DID.</p>
<p>But instead of relying on the <code>service</code> and the <code>relativeRef</code> parameter, the ToIP spec is focused on the <code>resource</code> parameter - so, if the DID URL contains the <code>resource</code> parameter - it must return the resource.</p>
<p>Example:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">did:example:21tDAKCERh95uGgKbJNHYp/some/path?resource=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">did:example:21tDAKCERh95uGgKbJNHYp/some/longer/path?resource=json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">did:example:21tDAKCERh95uGgKbJNHYp/uuid:33ad7beb-1abc-4a26-b892-466df4379a51/?resource=ld+json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">did:example:21tDAKCERh95uGgKbJNHYp/resources/uuid:33ad7beb-1abc-4a26-b892-466df4379a51/?resource=cbor</span><br></span></code></pre></div></div>
<p>The main disadvantage of this approach is that the logic for resolving and fetching the resource associated with the given DID URL completely relies on DID method specification (in the W3C variation it&#x27;s just a convention and the algorithm for the resource resolution)</p>
<p>ToIP specification doesn&#x27;t describe the details about the storage of the underlying resource. It might be DLT (blockchain or IPFS) or classic cloud or on-premise storage.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="did-url-dereferencing-trust-over-ip-specification---latest">DID URL Dereferencing (Trust over IP specification - latest)<a href="#did-url-dereferencing-trust-over-ip-specification---latest" class="hash-link" aria-label="Direct link to DID URL Dereferencing (Trust over IP specification - latest)" title="Direct link to DID URL Dereferencing (Trust over IP specification - latest)" translate="no">​</a></h3>
<p>The new specification for DID URL dereferencing is an improved specification with recommended Cheqd idea to publish the resource metadata in the DID Document.</p>
<p>The main difference with the previous specification is an introduction of parameters that can discover the resource (instead of using <code>resource</code> field only) and simplification of the Cheqd&#x27;s approach by skipping the <code>collection</code> abstraction.</p>
<p>The DID Document refers to the associated resource via linked resource metadata.</p>
<p>The changes to the DID method are also required (described in the Verifiable Data Registry and DID Method Requirements)</p>
<p>The current status of the document is a draft, but it&#x27;s going to be published in the did-core specification.</p>
<p>The list of resource parameters with descriptions is the following:</p>
<ul>
<li class=""><code>resourceUri</code> (required): A string or a map that conforms to the rules of [RFC3986] for URIs which SHOULD directly lead to a location where the resource can be accessed from.</li>
<li class=""><code>resourceCollectionId</code> (optional): A string that conforms to a method-specific unique identifier format.</li>
<li class=""><code>resourceId</code> (optional): A string that conforms to a method-specific unique identifier format.</li>
<li class=""><code>resourceName</code> (required): A string that uniquely names and identifies a resource. This property, along with the resourceType below, can be used to track version changes within a resource.</li>
<li class=""><code>resourceType</code> (required): A string that identifies the type of resource. This property, along with the <code>resourceName</code> above, can be used to track version changes within a resource. Not to be confused with the media type. (TBC to add to DID Spec Registries)</li>
<li class=""><code>resourceVersionId</code> (optional): A string that uniquely identifies the version of the resource provided by the resource creator as a tag.</li>
<li class=""><code>mediaType</code> (required): A string that identifies the IANA-registered Media Type for a resource.</li>
<li class=""><code>created</code> (required): A JSON String serialized as an XML DateTime normalized to UTC 00:00:00 and without sub-second decimal precision.</li>
<li class=""><code>checksum</code> (optional): A string that provides a checksum (e.g. SHA256, MD5) for the resource to facilitate data integrity.</li>
<li class=""><code>previousVersionId</code> (optional): The value of the property MUST be a string. This is the previous version of a resource with the same resourceName and resourceType. The value must be &#x27;null&#x27; if there is no previous version.</li>
<li class=""><code>nextVersionId</code> (optional): The value of the property MUST be a string. This is the previous version of a resource with the same resourceName and resourceType. The value must be &#x27;null&#x27; if there is no previous version.</li>
</ul>
<p>This specification describes many important aspects:</p>
<ul>
<li class="">the list of the query parameters in the DID URL for dereferencing the resource and error messages,</li>
<li class="">DID Method and VDR requirements, and</li>
<li class="">DID Resolver requirements</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="positive-consequences-3">Positive Consequences<a href="#positive-consequences-3" class="hash-link" aria-label="Direct link to Positive Consequences" title="Direct link to Positive Consequences" translate="no">​</a></h4>
<ul>
<li class="">interoperability: the resource is resolved in a standard way according to the ToIP specification following W3C specification for DID URL dereferencing</li>
<li class="">discoverability: the resource defined in DID URL is resolved and fetched dynamically</li>
<li class="">scalability: compared to W3C specification, the DID Document is not required to fetch the resource, so instead of 2-3 steps (calls), the resource resolution should be completed in a single step. The behavior must be described in the DID Method and implemented by the DID resolver.</li>
<li class="">trust: publishing the <code>checksum</code> of the resource inside of the DID Document allows other SSI system to check the resource validity.</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="negative-consequences-3">Negative Consequences<a href="#negative-consequences-3" class="hash-link" aria-label="Direct link to Negative Consequences" title="Direct link to Negative Consequences" translate="no">​</a></h4>
<ul>
<li class="">scalability: the specification is inspired by the Cheqd approach to store the linkedResourceMetadata inside of the DID Document. ToIP specification describes this functionality as optional (&quot;Through associating the resource with a DID Document, the DID Document may generate associated metadata about the resource&quot;)</li>
<li class="">complexity: the specification is the most complex to fetch the resource, so it&#x27;s not trivial to implement it for all DIDs in the SSI ecosystem.</li>
<li class="">specification: the resolution logic of resources must be described in the DID method and implemented in the DID resolver. As a consequence of this approach, the solution must either communicate directly with the DLT or rely on the SaaS layer for fetching the resources.</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="out-of-the-scope-2">Out of the Scope<a href="#out-of-the-scope-2" class="hash-link" aria-label="Direct link to Out of the Scope" title="Direct link to Out of the Scope" translate="no">​</a></h4>
<ul>
<li class="">longevity, and technology stack are not specified in this solution but must be guaranteed by the underlying DLT</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="rootsid---cardano-anoncreds-implementation-of-toip-at-the-cardano-stack">RootsID - Cardano AnonCreds (Implementation of ToIP at the Cardano stack)<a href="#rootsid---cardano-anoncreds-implementation-of-toip-at-the-cardano-stack" class="hash-link" aria-label="Direct link to RootsID - Cardano AnonCreds (Implementation of ToIP at the Cardano stack)" title="Direct link to RootsID - Cardano AnonCreds (Implementation of ToIP at the Cardano stack)" translate="no">​</a></h3>
<p>RootsID adopted the AnonCreds specification to store the credential schema and credential definition on the Cardano blockchain.</p>
<p>Links to the implementation and the method description are in the #Links section for this ADR</p>
<p>It is a proof of concept implementation of ToIP specification of DID URL dereferencing for resolving the resources linked to the DID in TypeScript and Python using Blockfrost REST API to the Cardano blockchain. The Blockfrost SaaS middle layer is used for publishing and fetching the Tx from the Cardano blockchain.</p>
<p>The solution is limited to storing AnonCreds entities only but can be extended to store the general resources.</p>
<p>For more details, please refer to the source code.</p>
<p>As the solution is based on the latest ToIP specification, it derives all positive and negative consequences from the previous but contains the concrete implementation for the Cardano blockchain that solves the trust and longevity aspects of the technical solution.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="positive-consequences-4">Positive Consequences<a href="#positive-consequences-4" class="hash-link" aria-label="Direct link to Positive Consequences" title="Direct link to Positive Consequences" translate="no">​</a></h4>
<ul>
<li class="">interoperability: the resource is resolved in a standard way according to the ToIP specification following W3C specification for DID URL dereferencing</li>
<li class="">discoverability: the resource metadata is published in the DID Document</li>
<li class="">trust &amp; longevity: is guaranteed by the underlying Cardano blockchain</li>
<li class="">technology stack: the solution is leveraging Blockfrost REST API for communicating with the Cardano blockchain</li>
<li class="">technology stack: the solution is stateless and is much cheaper in terms of the infrastructure cost</li>
<li class="">technology stack: the solution is implemented in Python and TypeScript (mobile platforms can use the same approach as well)</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="negative-consequences-4">Negative Consequences<a href="#negative-consequences-4" class="hash-link" aria-label="Direct link to Negative Consequences" title="Direct link to Negative Consequences" translate="no">​</a></h4>
<ul>
<li class="">scalability: the specification is inspired by the Cheqd approach to store the linkedResourceMetadata inside of the DID Document</li>
<li class="">the convention for references and the logic must be carefully reviewed:<!-- -->
<ul>
<li class=""><code>schemaId</code> in this solution is <code>{didRef}/resources/{cardano_transaction_id}</code>, so it doesn&#x27;t refer to the <code>id</code> but to the Tx where everything else is stored (it&#x27;s an interesting idea for a stateless design)</li>
<li class="">resource metadata is built according to the ToIP specification but for AnonCreds entities only: credential schema and credential definition.</li>
</ul>
</li>
<li class="">technology stack: it doesn&#x27;t fit to current platform, but can be used for inspiration.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="hyperledger-anoncreds">Hyperledger AnonCreds<a href="#hyperledger-anoncreds" class="hash-link" aria-label="Direct link to Hyperledger AnonCreds" title="Direct link to Hyperledger AnonCreds" translate="no">​</a></h3>
<p>According to the AnonCreds specification, such kinds of resources as credential schema and credential definition are stored on-chain. Indy blockchain is used by the Hyperledger technology stack.</p>
<p>The credential schema and definition are not signed by the issuer, but the transaction with the underlying resource is published by the issuer. So, the integrity of the resource is guaranteed by the fact that it&#x27;s published inside of the transaction signed by the issuer.</p>
<p>Example of the credential schema transaction:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;txn&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;attr_names&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;birthlocation&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;facephoto&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;expiry_date&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;citizenship&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;name&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;birthdate&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;firstname&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;uuid&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;name&quot;: &quot;BasicIdentity&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;version&quot;: &quot;1.0.0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;metadata&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;digest&quot;: &quot;06bf8a90335563826154700bf80003598932c8ffaffd4f3656fd8ed604bbb639&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;endorser&quot;: &quot;Ar1YzNwcM74M2Z4XKUWXMW&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;from&quot;: &quot;Y6LRXGU3ZCpm7yzjVRSaGu&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;payloadDigest&quot;: &quot;44e0181c9f9d5080434f9bf11801f1b0768a6b985195e14d56e5dab06fde0cb8&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;reqId&quot;: 1632381635230531300,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;taaAcceptance&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;mechanism&quot;: &quot;at_submission&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;taaDigest&quot;: &quot;8cee5d7a573e4893b08ff53a0761a22a1607df3b3fcd7e75b98696c92879641f&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;time&quot;: 1632355200</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;protocolVersion&quot;: 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;type&quot;: &quot;101&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;typeName&quot;: &quot;SCHEMA&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;txnMetadata&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;seqNo&quot;: 73904,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;txnId&quot;: &quot;Y6LRXGU3ZCpm7yzjVRSaGu:2:BasicIdentity:1.0.0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;txnTime&quot;: &quot;2021-09-23T07:20:40.000Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>The resource (credential schema) in the current example can be discovered using Indy SDK by the following id:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Y6LRXGU3ZCpm7yzjVRSaGu:2:BasicIdentity:1.0.0</span><br></span></code></pre></div></div>
<p>Technical details and flows are described in the <a href="https://hyperledger.github.io/anoncreds-spec/" target="_blank" rel="noopener noreferrer" class="">AnonCreds</a> specification.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="positive-consequences-5">Positive Consequences<a href="#positive-consequences-5" class="hash-link" aria-label="Direct link to Positive Consequences" title="Direct link to Positive Consequences" translate="no">​</a></h4>
<ul>
<li class="">discoverability: the credential schema or any other resource is discovered using the Indy SDK</li>
<li class="">scalability and longevity: are guaranteed by the underlying blockchain technology</li>
<li class="">trust: is achieved by underlying blockchain technology, the transaction with the resource contains the hashes and contains the <code>digest</code>, <code>taaDigest</code>, and <code>payloadDigest</code> fields</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="negative-consequences-5">Negative Consequences<a href="#negative-consequences-5" class="hash-link" aria-label="Direct link to Negative Consequences" title="Direct link to Negative Consequences" translate="no">​</a></h4>
<ul>
<li class="">interoperability: the current solution for storing the resources on-chain is coupled with the Indy blockchain and SDK (it will be mitigated by decoupling the AnonCreds specification from the Indy blockchain)</li>
<li class="">vendor lock: the solution is tightly coupled to the Indy blockchain (it will be mitigated in the future by decoupling the Aries project from the underlying Indy blockchain)</li>
</ul>
<p><strong>Note</strong>: there is a new specification of the AnonCreds that is decoupled from the Hyperledger stack. The specification can describe more details about the resource publishing.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="trinsic-solution">Trinsic Solution<a href="#trinsic-solution" class="hash-link" aria-label="Direct link to Trinsic Solution" title="Direct link to Trinsic Solution" translate="no">​</a></h3>
<p>The Trinsic solution is built on top of the Hyperledger Aries platform on the Indy blockchain
The main benefit is the Trinsic application layer that defines the domain models, entities, REST API and SDK for working with these.</p>
<p>The resource, such as credential schema, is stored on-chain, but the technical complexity and low-level details are hidden under <code>Template</code> and <a href="https://docs.trinsic.id/reference/services/template-service/#template-service" target="_blank" rel="noopener noreferrer" class=""><code>Template Service</code></a></p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="positive--negative-consequences">Positive &amp; Negative Consequences<a href="#positive--negative-consequences" class="hash-link" aria-label="Direct link to Positive &amp; Negative Consequences" title="Direct link to Positive &amp; Negative Consequences" translate="no">​</a></h4>
<p>Are similar to the Hyperledger AnonCreds solution</p>
<p>The main benefit of the Trinsic approach to storing resources is a good abstraction layer, documentation, REST API and a variety of supported programming languages in SDKs for dealing with underlying resources.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="solution-1-w3c-with-dynamic-resource-resolution">Solution #1 (W3C with dynamic resource resolution)<a href="#solution-1-w3c-with-dynamic-resource-resolution" class="hash-link" aria-label="Direct link to Solution #1 (W3C with dynamic resource resolution)" title="Direct link to Solution #1 (W3C with dynamic resource resolution)" translate="no">​</a></h3>
<p>The solution for storing the resources linked to the DID depends on two decisions that are described in the Context and Problem Statement:</p>
<ul>
<li class="">where the resource is stored</li>
<li class="">how the resource is discovered and fetched</li>
</ul>
<p>Taking into account the advantages and disadvantages of the existing solutions the decision about the solution for the Identus platform might be the following:</p>
<p>-the resource is linked to the DID by convention specified in the W3C specification, so specifying the resource in the DID URL and defining the service endpoint that exposes the resource allows to discover and fetch the resource using the Universal Resolver</p>
<ul>
<li class="">as an option, the same resource can be discovered and fetched by the Identus platform backend and SDK without loading the Universal resolver</li>
<li class="">the resource integrity must be guaranteed by one of the following options:<!-- -->
<ul>
<li class="">by signing the payload with one of the DID&#x27;s keys or</li>
<li class="">by publishing the resource metadata that contains the information about the resource (id, type, name, media type, hash) on-chain or</li>
<li class="">for the resource that is less than the blockchain limitation (up to 64KB) by publishing the resource together with the hash, and/or signature</li>
</ul>
</li>
<li class="">the resource can be stored in the cloud storage - PostgreSQL database - for indexing and lookup API</li>
</ul>
<p>As the Identus platform can leverage the Cardano blockchain and there is a strong requirement for longevity and security - the resource together with the signature and/or hash must be stored in the Cardano blockchain.</p>
<p>An example of this solution will be the following (concerning the current infrastructure and services):</p>
<ul>
<li class="">prism-node must be able to store the generic resource payload, signature and/or hash on-chain and restore the given resource in the underlying database (PostgreSQL) for indexing and lookup API</li>
<li class="">credential schema (or any other resource module) must be a part of the Atala SSI infrastructure and allow<!-- -->
<ul>
<li class="">publishing the concrete resource as a generic resource using the prism-node API</li>
<li class="">expose the API for discovery and fetching the resource by URL</li>
<li class="">expose the API for managing the resources (create, publish, lookup with pagination)</li>
</ul>
</li>
<li class="">the Universal Resolver for the DID Method must be able to discover and fetch the resource by DID URL</li>
<li class="">is needed, SDK and backend services can fetch the resources directly (not via the Universal Resolver)</li>
</ul>
<p>Example:</p>
<p>Given the credential schema with the signature:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;$id&quot;: &quot;driving-license-1.0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;$schema&quot;: &quot;http://json-schema.org/draft-07/schema#&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;description&quot;: &quot;Driving License&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;type&quot;: &quot;object&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;properties&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;credentialSubject&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;type&quot;: &quot;object&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;properties&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;emailAddress&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;type&quot;: &quot;string&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;format&quot;: &quot;email&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;givenName&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           &quot;type&quot;: &quot;string&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;familyName&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           &quot;type&quot;: &quot;string&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;dateOfIssuance&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           &quot;type&quot;: &quot;datetime&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;drivingLicenseID&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           &quot;type&quot;: &quot;string&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;drivingClass&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           &quot;type&quot;: &quot;integer&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;required&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;emailAddress&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;familyName&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;dateOfIssuance&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;drivingLicenseID&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;drivingClass&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;additionalProperties&quot;: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;proof&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;type&quot;: &quot;RsaSignature2018&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;created&quot;: &quot;2023-04-18T10:30:00Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;jws&quot;: &quot;eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6Imh0dHBzOi8vZXhhbXBsZS5jb20vY3JlZGVudGlhbHMvc3ViamVjdCIsInR5cGUiOiJWZXJpZmljYWxpY0NyZWRlbnRpYWwiLCJpc3N1ZXIiOiJodHRwczovL2V4YW1wbGUuY29tL2lzc3VlciIsImlzc3VlckRhdGUiOiIyMDIzLTA0LTE4VDEwOjMwOjAwWiIsImV4cGlyYXRpb25EYXRlIjoiMjAyNC0wNC0xOFQxMDowOTo1MFoiLCJjcmVkZW50aWFsU3ViamVjdCI6eyJpZCI6Imh0dHBzOi8vZXhhbXBsZS5jb20vY3JlZGVudGlhbHMvc3ViamVjdC9zdWJqZWN0IiwibmFtZSI6IkpvaG4gRG9lIiwic2lnbmF0dXJlIjoxMH19.OesuS6eC0gVh8SZpESM7Z4Yln9sGSsJHQ8s0LlcsD99H6_7U6vukUeT2_GZTtuTf9SwIfdtgViFTOfhzGTyM6oMGEeUJv6Umlh6TQ1fTm9XEDQV7JDBiaxRzV7S_vS6i&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;alg&quot;: &quot;RS256&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>In order to store it as a general resource on-chain, it should be binary encoded into CBOR format (or Base64 encoded string) and the metadata must be added to it.</p>
<p>For example, it might look like the following JSON object:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;id&quot;: &quot;f3d39687-69f5-4046-a960-3aae86a0d3ca&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;name&quot;: &quot;DrivingLicense-1.0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;resourceType&quot;: &quot;CredentialSchema&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;mediaType&quot;: &quot;application/json&quot;, // MIME Type of the resource</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;data&quot;: &quot;SGVsbG8sIHdvcmxk&quot;, // base 64 encoded or CBOR file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;did&quot;: &quot;did:prism:abdcefg&quot;, // the DID reference to link the resource to the DID and create the anchor to the DID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>... and published on the Cardano blockchain as a payload of the AtalaOperation object, so can be retrieved from the blockchain and added to the indexed database for resolution by the REST API</p>
<p>Given there is an Agent or CredentialSchema service that exposes the REST API for fetching the credential schema by ID (in the current implementation it corresponds to the Cloud Agent <code>/schema-registry/credential-schema/{uuid}</code>, but later might be changed to <code>/credential-schema/{didRef}/{id}?version={version}</code> )</p>
<p>So, the services of the Identus platform and SDKs can resolve the given schema by URL and use the convenient lookup API with filtering and pagination to manage the credential schema in the Web application.</p>
<p>To define the <code>schemaId</code> in the message of Issue Credential and Present Proof protocols the following DID URL can be used:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">did:prism:abcdefg1234567890?service=credentialschema&amp;relativeRef=%2Ff3d39687-69f5-4046-a960-3aae86a0d3ca</span><br></span></code></pre></div></div>
<p>The version is skipped as for resolving the single resource we don&#x27;t need a <code>version</code> parameter
<code>f3d39687-69f5-4046-a960-3aae86a0d3ca</code> - is a unique identifier that is derived from the triple: didRef, id and version.</p>
<p>So, having the following service endpoint definition in the DID Document:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;service&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;id&quot;: &quot;did:prism:abcdefg#credentialschema&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;type&quot;: &quot;CredentialSchemaService&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;serviceEndpoint&quot;: &quot;https://agent.example.com/schema-registry/schemas&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>And having the logic for dereferencing the DID URL in the PRISM DID Resolver, any system in the SSI ecosystem can fetch this resource and validate its authorship.</p>
<p>Storing resources larger than 64KB is out of the scope of this ADR. These must be stored in a slightly different way, for instance, the image ~10MB, can be stored and linked to the DID Document in the following way:</p>
<ul>
<li class="">the image is stored in the cloud database in a binary format</li>
<li class="">the metadata and the hash of the image are stored on-chain</li>
<li class="">optionally, the signature of the owner DID can be generated for the payload and stored together with the hash</li>
<li class="">to prove the integrity of the image file, the hash of the binary representation must be the same and/or the signature must be verified</li>
<li class="">the resource can be fetched in the same way and the credential schema from the previous example</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="positive-consequences-6">Positive Consequences<a href="#positive-consequences-6" class="hash-link" aria-label="Direct link to Positive Consequences" title="Direct link to Positive Consequences" translate="no">​</a></h4>
<ul>
<li class="">discoverability: the credential schema or any other resource is discovered using the Universal Resolver</li>
<li class="">scalability: the size of DID document doesn&#x27;t grow when a new resource is added, the number of the resources is limited by the scalability of the underlying database and the blockchain</li>
<li class="">longevity: for the resource that can be stored on-chain the longevity is 100% guaranteed by the underlying blockchain technology</li>
<li class="">trust: is achieved by cryptography and the underlying blockchain technology, the transaction with the resource contains the hashes and the signatures that can be verified</li>
<li class="">interoperability: any system that uses Universal Resolver can fetch the resource by dereferencing the DID URL (following the  W3C specification)</li>
<li class="">vendor lock: by publishing the specifications and the algorithms for fetching the data, the resource can be resolved by any other SSI system</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="negative-consequences-6">Negative Consequences<a href="#negative-consequences-6" class="hash-link" aria-label="Direct link to Negative Consequences" title="Direct link to Negative Consequences" translate="no">​</a></h4>
<ul>
<li class="">longevity: for the resource that can not be stored on-chain because of the large size longevity is guaranteed by the cloud recovery procedures and data backup. As an option for mitigating this problem, the resource can be stored in IPFS (additional ADR is required for this)</li>
<li class="">vendor lock: the solution is coupled to the Cardano blockchain</li>
</ul>
<p><strong>NOTE:</strong> one of the main concerns of this ADR is storing the resources on-chain because of size limitation, throughput, latency and cost. This option allows to postpone this decision and implement the DID-linked resources without the need of storing resources on-chain.</p>
<hr>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="solution-2-toip-specification-implementation">Solution #2 (ToIP specification implementation)<a href="#solution-2-toip-specification-implementation" class="hash-link" aria-label="Direct link to Solution #2 (ToIP specification implementation)" title="Direct link to Solution #2 (ToIP specification implementation)" translate="no">​</a></h3>
<p>ToIP specification can be used to implement the resource resolution.
To implement it the following things are required:</p>
<ul>
<li class="">specify in the DID method the logic of resolution of the resources from the DID URL</li>
<li class="">specify the service mapping in the DID method and implement the resource resolution logic in the DID resolver</li>
<li class="">add <code>didDocumentMetadata.linkedResourceMetadata</code> field to the DID method and implement the logic in the VDR layer</li>
<li class="">implement the service layer according to the ToIP specification</li>
</ul>
<p>ToIP solution specifies the requirements to the VDR (blockchain) that is not easy to achieve with the current implementation of the Identus platform.
According to this specification, the Universal Resolver must have the direct access to the blockchain or use a centralized layer for fetching the resources over REST API.
Before implementing this specification is the Identus platform we need to answer the following questions:</p>
<ul>
<li class="">who is hosting the <code>prism-node</code> infrastructure for the Universal Resolver and how it&#x27;s managed?</li>
<li class="">should we make the PRISM DID Method responsible for resource resolution logic?</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="positive-consequences-7">Positive Consequences<a href="#positive-consequences-7" class="hash-link" aria-label="Direct link to Positive Consequences" title="Direct link to Positive Consequences" translate="no">​</a></h4>
<ul>
<li class="">interoperability: the resource is resolved in a standard way according to the ToIP specification following W3C specification for DID URL dereferencing</li>
<li class="">discoverability: the resource defined in DID URL is resolved and fetched dynamically</li>
<li class="">scalability: compared to W3C specification, the DID Document is not required to fetch the resource, so instead of 2-3 steps (calls), the resource resolution should be completed in a single step. The behavior must be described in the DID Method and implemented by the DID resolver.</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="negative-consequences-7">Negative Consequences<a href="#negative-consequences-7" class="hash-link" aria-label="Direct link to Negative Consequences" title="Direct link to Negative Consequences" translate="no">​</a></h4>
<ul>
<li class="">complexity: the solution is complex and over-engineered. A lot of components and flows must be defined to fetch the resource.</li>
<li class="">specification: current approach might be changed as it&#x27;s still in the draft status, so implementing it is risky</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="decision-outcome">Decision Outcome<a href="#decision-outcome" class="hash-link" aria-label="Direct link to Decision Outcome" title="Direct link to Decision Outcome" translate="no">​</a></h2>
<p>Each option has technical challenges and limitations, but it&#x27;s possible to define the following decisions as an outcome:</p>
<ul>
<li class="">the resource MUST be stored on-chain to guarantee trust and longevity aspects, for the Identus platform it is the Cardano blockchain</li>
<li class="">the resource SHOULD be indexed for quick lookup over the API</li>
<li class="">the resource CAN be referenced in the DID Document for additional discoverability</li>
<li class="">the resource MUST be dereferenced from the DID URL according to W3C or ToIP specification and implementation</li>
<li class="">the resource resolution CAN be described in the DID Method (for the dynamic resource linking and W3C dereferencing algorithm it&#x27;s not required)</li>
<li class="">the complexity of the solution SHOULD be adequate to the original goal: get the resource linked to the DID</li>
<li class="">the solution SHOULD be scalable</li>
<li class="">the solution MUST be interoperable and easily adopted by the SSI ecosystem</li>
</ul>
<p>The solution option #1 is considered a good option as it satisfies the requirements and the majority of the negative consequences are mitigated.
The following comparison table is a summary of the available options.</p>
<table><thead><tr><th>Option</th><th>Simplicity</th><th>Trust</th><th>Scalability</th><th>Interop</th><th>Discoverability</th><th>Decentalisation</th></tr></thead><tbody><tr><td>linkedResources field</td><td>➕</td><td>✔️</td><td>➖</td><td>➖</td><td>➕</td><td>N/A</td></tr><tr><td>linkedResourceMetadata (Cheqd)</td><td>➖<!-- -->/<!-- -->➕</td><td>✔️</td><td>➖<!-- -->/<!-- -->➕</td><td>➕</td><td>➕</td><td>✔️</td></tr><tr><td>DID URL Dereferencing (W3C specification)</td><td>➕</td><td>N/A</td><td>➕</td><td>➕</td><td>➖</td><td>✔️</td></tr><tr><td>DID URL Dereferencing (ToIP specification)</td><td>➖</td><td>✔️</td><td>➕<!-- -->/<!-- -->➖</td><td>➕<!-- -->/<!-- -->➖</td><td>➕</td><td>✔️</td></tr><tr><td>RootsID - Cardano AnonCreds</td><td>➕</td><td>✔️</td><td>➕<!-- -->/<!-- -->➖</td><td>➕</td><td>➕</td><td>✔️</td></tr><tr><td>Hyperledger AnonCreds</td><td>➕</td><td>✔️</td><td>➕</td><td>➖</td><td>➖</td><td>✔️</td></tr><tr><td>Trinsic</td><td>➖</td><td>✔️</td><td>➕<!-- -->/<!-- -->➖</td><td>➖</td><td>➖</td><td>✔️</td></tr><tr><td>Solution #1 W3C</td><td>➕</td><td>✔️</td><td>➕</td><td>➕</td><td>➖</td><td>✔️</td></tr><tr><td>Solution #2 ToIP</td><td>➖</td><td>✔️</td><td>➖<!-- -->/<!-- -->➕</td><td>➕<!-- -->/<!-- -->➖</td><td>➕</td><td>✔️</td></tr></tbody></table>
<hr>
<p>Each option reviewed in this ADR is a composition of the following architectural decisions:</p>
<ul>
<li class="">the resource is stored on-chain or off-chain</li>
<li class="">the VDR layer is managed or unmanaged (for instance, leveraging the Blockfrost REST API can simplify the solution, but might be expensive at scale)</li>
<li class="">domestic or official (W3C/ToIP specification implementation</li>
<li class="">static/dynamic resource discoverability (is resource metadata stored in the DID Document or not)</li>
<li class="">DID URL dereferencing algorithm and naming convention</li>
<li class="">level of trust: Tx signature, resource hash, resource signature</li>
<li class="">decentralized or SaaS solution</li>
<li class="">SDK, Universal Resolver or REST API for fetching the resource</li>
</ul>
<p>The main benefits of option #1 for the Identus platform are the following:</p>
<ul>
<li class="">the resource is stored on-chain</li>
<li class="">the resource is published and indexed by the managed VDR layer (prism-node)</li>
<li class="">the resource is available via REST API &amp; SDK for the product-level applications</li>
<li class="">the resource is dereferenced via the DID URL in the DID resolver</li>
<li class="">the resource is linked to the DID dynamically (using DID URL + dereferencing algorithm)</li>
<li class="">this solution is scalable and decentralized (anyone can deploy the Identus stack)</li>
<li class="">level of trust can be guaranteed by the underlying VDR and enforced by hashes or signatures of the resource</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="links">Links<a href="#links" class="hash-link" aria-label="Direct link to Links" title="Direct link to Links" translate="no">​</a></h2>
<ul>
<li class=""><a href="https://blog.cheqd.io/our-approach-to-resources-on-ledger-25bf5690c975" target="_blank" rel="noopener noreferrer" class="">Our Approach to DID-Linked Resources</a></li>
<li class=""><a href="https://docs.cheqd.io/identity/guides/did-linked-resources/context" target="_blank" rel="noopener noreferrer" class="">Context for Developing DID-Linked Resources</a></li>
<li class=""><a href="https://docs.cheqd.io/identity/architecture/adr-list/adr-002-did-linked-resources" target="_blank" rel="noopener noreferrer" class="">ADR 002: DID-Linked Resources</a></li>
<li class=""><a href="https://hyperledger.github.io/anoncreds-spec/#schema-publisher-publish-schema-object" target="_blank" rel="noopener noreferrer" class="">Hyperledger Anoncreds - Schema Publisher: Publish Schema Object</a></li>
<li class=""><a href="https://wiki.trustoverip.org/display/HOME/DID+URL+Resource+Parameter+Specification" target="_blank" rel="noopener noreferrer" class="">ToIP - DID URL Resource Parameter Specification</a></li>
<li class=""><a href="https://wiki.trustoverip.org/display/HOME/DID-Linked+Resources+Specification" target="_blank" rel="noopener noreferrer" class="">ToPI - DID-Linder Resources Specification</a></li>
<li class=""><a href="https://www.w3.org/TR/did-core/#did-parameters" target="_blank" rel="noopener noreferrer" class="">DID-Core#did-parameters</a></li>
<li class=""><a href="https://w3c-ccg.github.io/did-resolution/#dereferencing" target="_blank" rel="noopener noreferrer" class="">DID-Resolution#dereferencing</a></li>
<li class=""><a href="https://github.com/roots-id/cardano-anoncreds/blob/main/cardano-anoncred-methods.md" target="_blank" rel="noopener noreferrer" class="">RootsID AnonCreds Methods</a></li>
<li class=""><a href="https://github.com/roots-id/cardano-anoncreds" target="_blank" rel="noopener noreferrer" class="">RootsID Cardano AnonCreds repo</a></li>
</ul></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/documentation/adrs/decisions/2023-01-18-quill-library-for-sql-statement-generation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Quill library for SQL statement generation and validation</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/documentation/adrs/decisions/2023-05-09-message-routing-for-multi-tenant"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Routing Requests to the Correct Tenant</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#target" class="table-of-contents__link toc-highlight">Target</a></li><li><a href="#context-and-problem-statement" class="table-of-contents__link toc-highlight">Context and Problem Statement</a></li><li><a href="#constraints" class="table-of-contents__link toc-highlight">Constraints</a><ul><li><a href="#storage-limitations" class="table-of-contents__link toc-highlight">Storage limitations</a></li><li><a href="#scalability" class="table-of-contents__link toc-highlight">Scalability</a></li><li><a href="#access-control" class="table-of-contents__link toc-highlight">Access control</a></li><li><a href="#data-privacy" class="table-of-contents__link toc-highlight">Data privacy</a></li></ul></li><li><a href="#decision-drivers" class="table-of-contents__link toc-highlight">Decision Drivers</a></li><li><a href="#storage" class="table-of-contents__link toc-highlight">Storage</a></li><li><a href="#linking-the-resource-to-the-did" class="table-of-contents__link toc-highlight">Linking the resource to the DID</a></li><li><a href="#considered-options" class="table-of-contents__link toc-highlight">Considered Options</a><ul><li><a href="#did-document-linkedresources-field" class="table-of-contents__link toc-highlight">DID document linkedResources field</a></li><li><a href="#did-document-diddocumentmetadata---linkedresourcemetadata-cheqd-adr" class="table-of-contents__link toc-highlight">DID document didDocumentMetadata -&gt; linkedResourceMetadata (Cheqd ADR)</a></li><li><a href="#did-url-dereferencing-w3c-specification" class="table-of-contents__link toc-highlight">DID URL dereferencing (W3C specification)</a></li><li><a href="#did-url-dereferencing-trust-over-ip-specification---outdated" class="table-of-contents__link toc-highlight">DID URL Dereferencing (Trust over IP specification - outdated)</a></li><li><a href="#did-url-dereferencing-trust-over-ip-specification---latest" class="table-of-contents__link toc-highlight">DID URL Dereferencing (Trust over IP specification - latest)</a></li><li><a href="#rootsid---cardano-anoncreds-implementation-of-toip-at-the-cardano-stack" class="table-of-contents__link toc-highlight">RootsID - Cardano AnonCreds (Implementation of ToIP at the Cardano stack)</a></li><li><a href="#hyperledger-anoncreds" class="table-of-contents__link toc-highlight">Hyperledger AnonCreds</a></li><li><a href="#trinsic-solution" class="table-of-contents__link toc-highlight">Trinsic Solution</a></li><li><a href="#solution-1-w3c-with-dynamic-resource-resolution" class="table-of-contents__link toc-highlight">Solution #1 (W3C with dynamic resource resolution)</a></li><li><a href="#solution-2-toip-specification-implementation" class="table-of-contents__link toc-highlight">Solution #2 (ToIP specification implementation)</a></li></ul></li><li><a href="#decision-outcome" class="table-of-contents__link toc-highlight">Decision Outcome</a></li><li><a href="#links" class="table-of-contents__link toc-highlight">Links</a></li></ul></div></div></div></div></main></div></div></div><div class="container"><footer class="footer_J6tW"><svg xmlns="http://www.w3.org/2000/svg" width="145" height="38" fill="none"></svg><span class="copyright_C6JK">Hyperledger Identus CC BY 4.0</span></footer></div></div>
</body>
</html>