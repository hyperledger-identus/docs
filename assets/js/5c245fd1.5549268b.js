"use strict";(self.webpackChunkidentus_documentation_portal=self.webpackChunkidentus_documentation_portal||[]).push([[61],{12059:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>l});var i=t(74848),s=t(28453);const o={},a="Issue credentials (OID4VCI)",r={id:"credentials/oid4vci/issue",title:"Issue credentials (OID4VCI)",description:"OID4VCI (OpenID for Verifiable Credential Issuance) is a protocol that extends OAuth2 to issue credentials.",source:"@site/cloud-agent/docs/docusaurus/credentials/oid4vci/issue.md",sourceDirName:"credentials/oid4vci",slug:"/credentials/oid4vci/issue",permalink:"/docs/tutorials/credentials/oid4vci/issue",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialsSidebar",previous:{title:"Issue credentials (Connectionless)",permalink:"/docs/tutorials/credentials/connectionless/issue"},next:{title:"Present proof (DIDComm)",permalink:"/docs/tutorials/credentials/didcomm/present-proof"}},c={},l=[{value:"Example: OID4VCI Authorization Code Issuance",id:"example-oid4vci-authorization-code-issuance",level:2},{value:"1. Launching Local Example Stack",id:"1-launching-local-example-stack",level:4},{value:"2. Building the demo application",id:"2-building-the-demo-application",level:4},{value:"3. Running the demo application",id:"3-running-the-demo-application",level:4}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h4:"h4",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"issue-credentials-oid4vci",children:"Issue credentials (OID4VCI)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"/docs/concepts/glossary#oid4vci",children:"OID4VCI"})," (OpenID for Verifiable Credential Issuance) is a protocol that extends OAuth2 to issue credentials.\nIt involves a Credential Issuer server and an Authorization server working together,\nusing the authorization and token endpoints on the Authorization Server to grant holders access to credentials on the Credential Issuer server.\nThese servers may or may not be the same, depending on the implementation."]}),"\n",(0,i.jsxs)(n.p,{children:["The Identus Cloud Agent can act as a Credential Issuer server and integrate with any Authorization Server that follows the integration contract. The contract for the Authorization Server in the OID4VCI flow can be found ",(0,i.jsx)(n.a,{href:"https://github.com/hyperledger/identus-cloud-agent/blob/main/docs/general/authserver-oid4vci-contract.md",children:"here"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"example-oid4vci-authorization-code-issuance",children:"Example: OID4VCI Authorization Code Issuance"}),"\n",(0,i.jsxs)(n.p,{children:["Example is available ",(0,i.jsx)(n.a,{href:"https://github.com/hyperledger/identus-cloud-agent/tree/main/examples/st-oid4vci",children:"here"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Following the instructions, the example demonstrates a single-tenant agent setup using an external Keycloak as the Issuer Authorization Server. The demo application walks through the authorization code issuance flow step-by-step."}),"\n",(0,i.jsx)(n.h4,{id:"1-launching-local-example-stack",children:"1. Launching Local Example Stack"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker-compose up\n"})}),"\n",(0,i.jsxs)(n.p,{children:["After running the ",(0,i.jsx)(n.code,{children:"docker-compose up"})," command, all the containers should be running and initialized with the necessary configurations. The following logs should appear indicating that the stack is ready to execute the flow"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"   _   _   _        _ _\n  | |_| |_| |_ _ __| | | ___\n  | ' \\  _|  _| '_ \\_  _(_-<\n  |_||_\\__|\\__| .__/ |_|/__/\n              |_|\n 2024-07-16_11:51:01.301 INFO  o.h.b.s.BlazeServerBuilder@L424:[ZScheduler-Worker-5] {} - http4s v0.23.23 on blaze v0.23.15 started at http://0.0.0.0:8085/\n\n"})}),"\n",(0,i.jsx)(n.h4,{id:"2-building-the-demo-application",children:"2. Building the demo application"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker build -t identus-oid4vci-demo:latest ./demo\n"})}),"\n",(0,i.jsx)(n.h4,{id:"3-running-the-demo-application",children:"3. Running the demo application"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run --network <NETWORK_NAME> -it identus-oid4vci-demo:latest\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The parameter ",(0,i.jsx)(n.code,{children:"NETWORK_NAME"})," should be the same as the network name in docker-compose.\nThis name can be discovered by running the ",(0,i.jsx)(n.code,{children:"docker network ls"})," command."]}),"\n",(0,i.jsx)(n.p,{children:"The demo application acts as both issuer and Holder in the same script.\nSee the source code for detailed steps on how to implement this flow.\nThe demo application will interactively prompt the next step in the issuance flow.\nKeep continuing until this log appears asking the user to log in using the browser."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"##############################\n\nOpen this link in the browser to login\n\nhttp://localhost:9980/realms/students/protocol/openid-connect/auth?redirect_uri=.....\n\n##############################\n\nwating for authorization redirect ...\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Open this URL in the browser. Enter ",(0,i.jsx)(n.code,{children:"alice"})," for the username and ",(0,i.jsx)(n.code,{children:"1234"})," for the password."]}),"\n",(0,i.jsx)(n.p,{children:"After a successful login, this log should appear indicating the demo application has received the credentials."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'::::: Credential Received :::::\n{\n  "credential": "eyJ0eXAiOiJKV1QiLC...SK1vJK-fx6zjXw"\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>r});var i=t(96540);const s={},o=i.createContext(s);function a(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);