branches:
  - name: 'main'
  - name: 'beta'
    prerelease: "snapshot"

plugins:
  - '@semantic-release/commit-analyzer'
  - '@semantic-release/release-notes-generator'
  - [ '@semantic-release/changelog', { changelogFile: 'CHANGELOG.md' } ]
  - [ '@semantic-release/exec', {
    prepareCmd: 'npm version ${nextRelease.version} --git-tag-version false && ./infra/release-docs-container.sh ${nextRelease.version}',
    } ]
  - [ '@semantic-release/git', {
    assets: [ 'package.json' , 'package-lock.json', 'CHANGELOG.md' ],
    message: 'chore(release): release prism documentation portal ${nextRelease.version} [skip ci]
    ${nextRelease.notes}' } ]
  - [ "semantic-release-slack-bot", {
    notifyOnSuccess: true,
    notifyOnFail: true,
    markdownReleaseNotes: true,
    onSuccessTemplate: {
      text: "A new version of Atala PRISM `$package_name` successfully released!\n
        Version: `$npm_package_version`\n
        Release notes:\n
        $release_notes" } } ]
